(this["webpackJsonproyal-pharmacy"]=this["webpackJsonproyal-pharmacy"]||[]).push([[18],{461:function(e,t,a){"use strict";a.d(t,"a",(function(){return D}));var s=a(5),c=a(2),n=a.n(c),l=a(12),r=a.n(l),i=a(17),d=a.n(i),o=(a(38),a(204)),j=a(135),b=a(205),m=a(56),u=a(45),x=a(4),h=a.n(x),O=a(6),p=a(9),f=a(37),v=a(78),y=a(25),g=a(69),N=a(18),k=a(55),w=a(145),C=a(1),S=[{value:"+965",label:"+965"},{value:"+966",label:"+966"}];function _(e){var t=e.markerAddress,a=e.setShowMap,c=e.marker,l=e.setMarker,r=e.outOfBorder,i=n.a.useState(S[0]),o=Object(s.a)(i,2),j=o[0],b=o[1],m=n.a.useContext(N.a).addAddressMutation,u=n.a.useState(""),x=Object(s.a)(u,2),g=x[0],_=x[1],q=n.a.useState(!1),z=Object(s.a)(q,2),H=z[0],D=z[1],B=Object(v.a)().formatMessage,L=n.a.useState(!1),I=Object(s.a)(L,2),U=I[0],V=I[1],F=y.a({apartmentOrHouseNumber:y.c().required(B({id:"required-field"})),buildingOrTowerNumber:y.c().required(B({id:"required-field"})),addressName:y.c().required(B({id:"required-field"})),phoneNumber:y.c().matches(/^\d+$/,B({id:"number-only"})).min(8,B({id:"invalid-phone"})).required(B({id:"required-field"})),additionalDetails:y.c()});return Object(C.jsxs)("div",{children:[Object(C.jsx)(w.a,{children:H&&Object(C.jsx)(k.a,{message:B({id:"something-went-wrong-snackbar"}),closeFunction:function(){D(!1)}})}),Object(C.jsx)("div",{className:"font-bold p-2",children:Object(C.jsx)("h1",{children:B({id:"location-details"})})}),Object(C.jsxs)("div",{className:"p-2",children:[Object(C.jsxs)("div",{className:"flex items-center justify-between",children:[Object(C.jsx)("label",{htmlFor:"location",className:"text-sm font-bold text-gray-700",children:B({id:"delivery-location"})}),Object(C.jsx)("button",{onClick:function(){l(null),_("")},className:"text-main-color text-sm hover:underline",children:B({id:"clear"})})]}),Object(C.jsx)("textarea",{rows:"3",id:"location",className:" mt-1 w-full rounded border  p-1  ",type:"textarea",value:t||g,readOnly:t,onChange:function(e){return _(e.target.value)}}),Object(C.jsx)(f.a,{initialValues:{apartmentOrHouseNumber:"",buildingOrTowerNumber:"",phoneNumber:"",additionalDetails:"",addressName:""},validationSchema:F,onSubmit:function(){var e=Object(p.a)(h.a.mark((function e(s){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({lat:null===c||void 0===c?void 0:c.lat,lng:null===c||void 0===c?void 0:c.lng,defaultLocation:U,addressDetails:Object(O.a)(Object(O.a)({phoneNumber:"".concat(j.value).concat(s.phoneNumber)},s),{},{markerAddress:t,userTyped_address:g})});case 3:a(!1),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),D(!0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var a=e.handleSubmit,s=e.values,c=e.isSubmitting;return Object(C.jsxs)("form",{onSubmit:a,children:[Object(C.jsx)(T,{label:B({id:"maps-detailed-address-phone"}),name:"phoneNumber",value:s.phoneNumber,type:"text",countryCode:j,setCountryCode:b}),Object(C.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[Object(C.jsx)(A,{label:B({id:"maps-detailed-address-apartment"}),name:"apartmentOrHouseNumber",value:s.apartmentOrHouseNumber,type:"text"}),Object(C.jsx)(A,{label:B({id:"maps-detailed-address-building"}),name:"buildingOrTowerNumber",value:s.buildingOrTowerNumber,type:"text"})]}),Object(C.jsx)(A,{label:B({id:"maps-detailed-address-name"}),name:"addressName",value:s.addressName,type:"text"}),Object(C.jsx)(M,{label:B({id:"maps-details-extra-details"}),name:"additionalDetails",value:s.additionalDetails}),Object(C.jsxs)("div",{className:" ",children:[Object(C.jsxs)("div",{className:"flex items-center mb-2",children:[Object(C.jsx)("label",{children:B({id:"mark-as-default"})}),Object(C.jsx)("input",{className:" mx-2",type:"checkbox",checked:U,onChange:function(){return V(!U)}})]}),Object(C.jsx)("button",{type:"submit",disabled:!t&&!g||r,className:"  ".concat(!t&&!g||r?"bg-gray-500 text-gray-300":"bg-main-color text-main-text"," p-2 rounded  w-full  flex items-center uppercase justify-center font-semibold"),children:c?Object(C.jsx)(d.a,{type:"ThreeDots",color:"#fff",height:23,width:23,visible:c}):Object(C.jsx)("h1",{children:B({id:"confirm-btn"})})})]})]})}})]})]})}var A=function(e){var t=e.label,a=(e.value,e.name),c=Object(u.a)(e,["label","value","name"]),n=Object(f.b)(a),l=Object(s.a)(n,2),r=l[0],i=l[1];return Object(C.jsxs)("div",{className:"w-full mb-1 relative",children:[Object(C.jsx)("label",{htmlFor:a,className:"text-sm font-bold text-gray-700 mb-1",children:t}),Object(C.jsx)("input",Object(O.a)(Object(O.a)(Object(O.a)({},r),c),{},{onBlur:function(e){r.onBlur(e)},className:" w-full rounded-sm border   p-1"})),i.touched&&i.error?Object(C.jsx)("h1",{className:"text-xs text-main-color mt-1",children:i.error}):Object(C.jsx)("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"},children:" "})]})},M=function(e){var t=e.label,a=(e.value,e.name),c=Object(u.a)(e,["label","value","name"]),n=Object(f.b)(a),l=Object(s.a)(n,1)[0],r=Object(v.a)().formatMessage;return Object(C.jsxs)("div",{className:"w-full mb-1 relative",children:[Object(C.jsxs)("div",{className:"flex items-center mb-1",children:[Object(C.jsx)("label",{htmlFor:a,className:"text-sm font-bold text-gray-700",children:t}),Object(C.jsxs)("h1",{className:"text-xs italic mx-3",children:["(",r({id:"maps-details-optional"}),")"]})]}),Object(C.jsx)("textarea",Object(O.a)(Object(O.a)(Object(O.a)({rows:3},l),c),{},{onBlur:function(e){l.onBlur(e)},className:" w-full rounded-sm border   p-1"}))]})},T=function(e){var t=e.label,a=(e.value,e.name),c=e.countryCode,n=e.setCountryCode,l=Object(u.a)(e,["label","value","name","countryCode","setCountryCode"]),r=Object(f.b)(a),i=Object(s.a)(r,2),d=i[0],o=i[1];return Object(C.jsxs)("div",{className:"w-full mb-1 flex flex-col ",children:[Object(C.jsx)("label",{htmlFor:a,className:"text-sm font-bold text-gray-800 mb-1",children:t}),Object(C.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"0.4fr 1fr",gap:"0.5rem"},children:[Object(C.jsx)(g.a,{options:S,isSearchable:!1,value:c,onChange:n,styles:{dropdownIndicator:function(e){return Object(O.a)(Object(O.a)({},e),{},{padding:"0.25rem"})},valueContainer:function(e){return Object(O.a)(Object(O.a)({},e),{},{padding:"0.5rem"})}}}),Object(C.jsx)("input",Object(O.a)(Object(O.a)(Object(O.a)({},d),l),{},{onBlur:function(e){d.onBlur(e)},className:" border rounded w-full p-2 ".concat(o.error&&"border-main-color")}))]}),o.touched&&o.error?Object(C.jsx)("h1",{className:"text-xs text-main-color mt-1",children:o.error}):Object(C.jsx)("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"},children:" "})]})},q=["places"],z={lat:29.3759,lng:47.9774},H={styles:o.a,disableDefaultUI:!0,zoomControl:!0};function D(e){var t=e.setShowMap,a=Object(m.useMediaQuery)({query:"(min-width: 768px)"}),c=n.a.useState(!1),l=Object(s.a)(c,2),i=l[0],o=l[1],u=Object(v.a)(),x=u.formatMessage,h=u.locale,O=Object(j.d)({googleMapsApiKey:"AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg",libraries:q,language:h}),p=O.isLoaded,f=O.loadError,y=n.a.useState(null),g=Object(s.a)(y,2),N=g[0],k=g[1],w=n.a.useState(null),S=Object(s.a)(w,2),A=S[0],M=S[1],T=n.a.useState(null),D=Object(s.a)(T,2),B=D[0],L=D[1],I=n.a.useRef(),U=n.a.useCallback((function(e){I.current=e}),[]),V=n.a.useCallback((function(e){var t=e.lat,a=e.lng;I.current.panTo({lat:t,lng:a}),k({lat:t,lng:a}),M(null)}),[]);return n.a.useEffect((function(){N?r.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(N.lat,",").concat(N.lng,"&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg","&language=").concat(h)).then((function(e){if(0===e.data.results.length)return L(null),M(null),void o(!0);"KW"!==e.data.results[0].address_components.find((function(e){return e.types.includes("country")})).short_name||0===e.data.results.length?o(!0):!0===i&&o(!1),L("".concat(e.data.results[0].formatted_address)),M("".concat(e.data.results[0].address_components.map((function(e){return e.short_name})).join(", ")))})).catch((function(e){})):(L(null),M(null))}),[N,h]),f?Object(C.jsx)("div",{className:"flex justify-center items-center h-full",children:Object(C.jsx)("h1",{children:x({id:"error-loading-maps"})})}):p?Object(C.jsxs)("div",{className:"".concat(a?"my-addresses-desktop-maps__grid":"my-addresses-mobile-maps__grid"),children:[Object(C.jsxs)("div",{className:"relative h-full",children:[Object(C.jsx)(b.a,{panTo:V,markerAddress:B}),Object(C.jsxs)(j.a,{mapContainerStyle:{width:"100%",height:a?"100%":"400px"},zoom:15,center:z,options:H,clickableIcons:!1,onLoad:U,onClick:function(e){k({lat:e.latLng.lat(),lng:e.latLng.lng()})},children:[N&&Object(C.jsx)(j.c,{position:{lat:null===N||void 0===N?void 0:N.lat,lng:null===N||void 0===N?void 0:N.lng}}),i&&Object(C.jsx)("div",{className:"absolute mx-2 rounded p-2  bg-main-color text-main-text text-center",style:{top:"110px",left:"2%",right:"2%",width:"94%"},children:Object(C.jsx)("h1",{className:"text-sm",children:x({id:"out-of-border"})})}),A&&Object(C.jsx)(j.b,{onCloseClick:function(){return M(null)},position:{lat:null===N||void 0===N?void 0:N.lat,lng:null===N||void 0===N?void 0:N.lng},options:{pixelOffset:new window.google.maps.Size(0,-50)},children:Object(C.jsx)("div",{className:"p-2",children:Object(C.jsx)("div",{children:Object(C.jsx)("h1",{children:A})})})})]})]}),Object(C.jsx)(_,{markerAddress:B,marker:N,setShowMap:t,setMarker:k,outOfBorder:i})]}):Object(C.jsx)("div",{className:"flex justify-center items-center h-full",children:Object(C.jsx)(d.a,{type:"ThreeDots",color:"#b72b2b",height:40,width:40,visible:!p})})}},465:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a(2);var s=a(79),c=a.n(s),n=a(178),l=a(1);function r(e){var t=e.alt,a=e.lat,s=e.width,r=e.height,i=e.lng;return Object(l.jsx)("div",{style:{position:"relative",backgroundColor:"#fff",paddingBottom:"calc(100% * ".concat(r,"/").concat(s,")"),width:"100%"},children:Object(l.jsx)(c.a,{placeholder:Object(l.jsx)("img",{src:n.a,alt:t}),className:"max-h-full",children:Object(l.jsx)("img",{src:a?"https://maps.googleapis.com/maps/api/staticmap?center=".concat(a,",").concat(i,"&zoom=15&size=").concat(s,"x").concat(r,"&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg"):n.a,alt:t,style:{maxHeight:"100%",maxWidth:"100%",display:"block",left:0,right:0},className:"mx-auto my-0 absolute"})})})}},506:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return F}));var s=a(4),c=a.n(s),n=a(9),l=a(34),r=a(6),i=a(5),d=a(2),o=a.n(d),j=a(241),b=a(242),m=a(17),u=a.n(m),x=(a(38),a(18)),h=a(461),O=a(451),p=a(114),f=a(145),v=a(21),y=a(129),g=a.n(y),N=a(78),k=a(465),w=a(1);function C(e){var t=e.setShowMap,a=e.userAddresses,s=e.handleSelectAddress,c=Object(N.a)().formatMessage,n=o.a.useState(null),l=Object(i.a)(n,2),r=l[0],d=l[1],j={partial:{right:0,top:0,bottom:0,width:"20%"},full:{right:0,top:0,bottom:0,width:"100%"}};return Object(w.jsxs)("div",{className:"min-h-full",children:[Object(w.jsx)("div",{className:" p-3 flex items-center justify-between bg-main-color text-main-text",children:Object(w.jsx)("h1",{className:"text-lg",children:c({id:"select-address-header"})})}),Object(w.jsx)(O.a,{children:Object(w.jsxs)(p.a.div,{layout:!0,className:"p-3 locations-grid__desktop",children:[a.map((function(e){return Object(w.jsx)(p.a.div,{layout:!0,className:"rounded border relative  bg-body-light",children:Object(w.jsxs)(p.a.div,{layout:!0,children:[Object(w.jsxs)("div",{style:{minHeight:"150px",position:"relative"},children:[Object(w.jsx)(k.a,{height:150,width:200,lat:e.lat,lng:e.lng,alt:e.address_name}),Object(w.jsxs)(p.a.div,{variants:j,initial:"partial",animate:r===e.id?"full":"partial",layout:!0,exit:"partial",onClick:function(){return t=e.id,void d(r===t?null:t);var t},className:"absolute overflow-hidden p-2 text-main-text  transition cursor-pointer duration-150 opacity-50 bg-gray-800 hover:opacity-75",children:[Object(w.jsx)(v.m,{style:{left:"10px"},className:"absolute  top-1/2 transform  -translate-y-1/2  w-5 h-5"}),Object(w.jsx)(f.a,{children:r===e.id&&Object(w.jsxs)(p.a.div,{initial:{opacity:0},animate:{opacity:1,marginLeft:"35px"},exit:{opacity:0},layout:!0,className:"text-sm",children:[Object(w.jsxs)("div",{children:[Object(w.jsxs)("h1",{children:[c({id:"maps-detailed-address-apartment-short"}),":"]}),Object(w.jsx)("h1",{children:e.apartment_house_number})]}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("h1",{children:[c({id:"maps-detailed-address-building-short"}),":"]}),Object(w.jsx)("h1",{children:e.building_tower_number})]}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("h1",{children:[c({id:"maps-detailed-address-phone-short"}),":"]}),Object(w.jsx)("h1",{children:e.phone_number})]})]})})]})]}),Object(w.jsxs)("div",{className:"p-2",children:[Object(w.jsx)("div",{className:"text-xs text-gray-600 font-semibold",children:Object(w.jsx)("h1",{children:e.address_name})}),Object(w.jsxs)("div",{className:"text-sm mb-2 font-semibold",style:{height:"65px"},children:[Object(w.jsx)("h1",{children:e.marked_address||e.userTyped_addres}),Object(w.jsx)("h1",{children:e.addition_direction})]}),Object(w.jsx)("button",{onClick:function(){return s(e)},className:"w-full p-1 rounded uppercase bg-main-color text-main-text",children:c({id:"select-btn"})})]})]})},e.id)})),Object(w.jsxs)("button",{onClick:function(){return t(!0)},className:"p-3 flex items-center justify-center self-center justify-self-center bg-main-color hover:bg-red-900 transition duration-150 relative rounded-lg text-main-text",children:[Object(w.jsx)(g.a,{background:!0}),Object(w.jsx)(v.q,{className:"h-8 w-8"})]})]})})]})}function S(e){var t=e.handleSelectAddress,a=o.a.useState(!1),s=Object(i.a)(a,2),c=s[0],n=s[1],l=o.a.useContext(x.a),r=l.userAddresses;return l.userAddressesLoading?Object(w.jsx)("div",{className:"flex h-full justify-center items-center",style:{minHeight:"calc(100vh - 150px)"},children:Object(w.jsx)(u.a,{type:"ThreeDots",color:"#b72b2b",height:40,width:40,visible:!0})}):Object(w.jsxs)("div",{className:"h-full",style:{minHeight:"calc(100vh - 150px)"},children:[0!==r.length&&!c&&Object(w.jsx)(C,{userAddresses:r,setShowMap:n,handleSelectAddress:t}),(0===r.length||c)&&Object(w.jsx)("div",{className:"rounded-sm border",children:Object(w.jsx)(h.a,{setShowMap:n})})]})}var _=a(95),A=a(22),M=a(147),T=a(148),q=a(151),z=a(149),H=a(10),D=a(39),B=a(8);function L(e){var t=e.handleStepBack,a=e.selectedAddress,s=e.paymentMethod,c=e.setPaymentMethod,n=e.handleCheckout,l=e.checkoutLoading,r=Object(N.a)(),i=r.formatMessage,d=r.locale,j=o.a.useContext(H.a).deliveryCountry,b=o.a.useContext(D.a),m=b.cartItems,x=b.cartSubtotal,h=b.cartTotal,O=b.shippingCost,p=b.couponCost,f=b.coupon,v=function(e){c(e)};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"user-checkout-personal-info__container h-full rounded border",children:[Object(w.jsxs)("div",{className:"font-semibold overflow-y-auto",style:{maxHeight:"calc(100vh - 190px)"},children:[Object(w.jsxs)("div",{className:"border-b",children:[Object(w.jsx)("div",{className:"p-2 border-b",children:Object(w.jsx)("h1",{className:" text-center",style:{fontWeight:900},children:i({id:"order-receipt"})})}),Object(w.jsxs)("div",{className:"my-orders-items__table-desktop font-semibold text-center mb-1 py-2",children:[Object(w.jsx)("h1",{children:"#"}),Object(w.jsx)("h1",{children:i({id:"the-item"})}),Object(w.jsx)("h1",{children:i({id:"quantity"})}),Object(w.jsx)("h1",{children:i({id:"price"})}),Object(w.jsx)("h1",{children:i({id:"total"})})]}),null===m||void 0===m?void 0:m.map((function(e,t){return Object(w.jsxs)("div",{className:"my-orders-item-desktop text-sm text-center mb-1",children:[Object(w.jsx)("div",{className:"",children:Object(w.jsx)("h1",{className:"",children:t+1})}),Object(w.jsx)(B.b,{to:"/".concat(d,"/products/").concat(e.slug,"/").concat(e.id),className:"hover:underline font-semibold truncate",children:e["name_".concat(d)]}),Object(w.jsx)("div",{className:"",children:Object(w.jsx)("h1",{className:"",children:e.qty})}),Object(w.jsx)("div",{style:{fontWeight:900},children:Object(w.jsxs)("h1",{className:"",children:[e.price," ",null===j||void 0===j?void 0:j.currency.translation[d].symbol]})}),Object(w.jsx)("div",{style:{fontWeight:900},className:"text-green-700",children:Object(w.jsxs)("h1",{className:"",children:[e.total," ",null===j||void 0===j?void 0:j.currency.translation[d].symbol]})})]},e.id)})),Object(w.jsx)("hr",{className:"my-1"}),Object(w.jsxs)("div",{className:"my-orders-receipt-summary font-bold p-2",children:[Object(w.jsx)("h1",{children:i({id:"cart-total"})}),Object(w.jsxs)("h1",{className:"text-center",children:[x,Object(w.jsx)("span",{className:"mx-1",children:null===j||void 0===j?void 0:j.currency.translation[d].symbol})]}),Object(w.jsx)("h1",{children:i({id:"cart-delivery-cost"})}),Object(w.jsxs)("h1",{className:" text-center",children:["0"===O?i({id:"cart-free"}):O,Object(w.jsx)("span",{className:"mx-1",children:null===j||void 0===j?void 0:j.currency.translation[d].symbol})]}),f&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h1",{className:"",children:i({id:"coupon-sale"})}),Object(w.jsxs)("h1",{className:"text-center text-green-700",children:[p,Object(w.jsx)("span",{className:"mx-1",children:null===j||void 0===j?void 0:j.currency.translation[d].symbol})]})]}),Object(w.jsx)("h1",{className:"text-green-700 text-xl font-bold mt-3",children:i({id:"subtotal"})}),Object(w.jsxs)("h1",{className:"text-green-700 text-center text-xl font-bold mt-3",children:[h," ",null===j||void 0===j?void 0:j.currency.translation[d].symbol]})]})]}),Object(w.jsxs)("div",{className:"",children:[Object(w.jsx)("div",{className:"p-2 border-b",children:Object(w.jsx)("h1",{style:{fontWeight:900},className:"text-center",children:i({id:"delivery-address"})})}),Object(w.jsxs)("div",{className:" p-2",style:{display:"grid",gridTemplateColumns:"1fr 0.4fr"},children:[Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"mb-2 text-center",children:[Object(w.jsxs)("h1",{className:" text-gray-700",children:[i({id:"delivery-location"})," "]}),Object(w.jsx)("h1",{children:null===a||void 0===a?void 0:a.marked_address})]}),Object(w.jsxs)("div",{className:" mb-2 text-center",children:[Object(w.jsxs)("div",{children:[Object(w.jsxs)("h1",{className:" text-gray-700",children:[i({id:"maps-detailed-address-apartment"})," "]}),Object(w.jsx)("h1",{children:null===a||void 0===a?void 0:a.apartment_house_number})]}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("h1",{className:"font-semibold text-gray-700",children:[i({id:"maps-detailed-address-building"})," "]}),Object(w.jsx)("h1",{children:null===a||void 0===a?void 0:a.building_tower_number})]})]}),Object(w.jsx)("div",{className:"text-center",children:Object(w.jsxs)("div",{children:[Object(w.jsxs)("h1",{className:"font-semibold text-gray-700",children:[i({id:"maps-details-extra-details"})," ",":"," "]}),Object(w.jsx)("h1",{className:"",children:(null===a||void 0===a?void 0:a.addition_direction)||i({id:"none"})})]})})]}),(null===a||void 0===a?void 0:a.lat)&&Object(w.jsx)("img",{src:"https://maps.googleapis.com/maps/api/staticmap?center=".concat(a.lat,",").concat(a.lng,"&zoom=15&size=200x200&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg"),alt:"map",className:"self-start"})]})]})]}),Object(w.jsx)("div",{className:"font-semibold border-l",children:Object(w.jsxs)("div",{className:" mb-4 relative  ",children:[Object(w.jsx)("div",{className:"p-2 border-b",children:Object(w.jsx)("h1",{className:"text-center",children:i({id:"select-payment-method"})})}),Object(w.jsx)("div",{className:"p-2",children:Object(w.jsx)("div",{className:"flex flex-col ",children:function(){var e=[];if(j)return j.payment.forEach((function(t){if(0===t.status)return null;"knet"===t.key&&e.push(Object(w.jsxs)("button",{onClick:function(){return v(t.key)},className:" ".concat(s===t.key&&"bg-main-color text-main-text border-main-color"," mb-3 flex border items-center justify-start rounded p-2 font-semibold"),children:[Object(w.jsx)("img",{src:M.a,alt:t.key}),Object(w.jsx)("div",{className:"flex-1 mx-3 text-left",children:i({id:t.key})}),Object(w.jsx)("div",{children:s===t.key?Object(w.jsx)(A.j,{className:"w-6 h-6 text-btn-secondary-light"}):Object(w.jsx)(A.i,{className:"w-6 h-6 text-btn-primary-light"})})]},t.key)),"credit"===t.key&&e.push(Object(w.jsxs)("button",{onClick:function(){return v(t.key)},className:" ".concat(s===t.key&&"bg-main-color text-main-text border-main-color"," mb-3 flex border items-center justify-start rounded p-2 font-semibold"),children:[Object(w.jsx)("img",{src:T.a,alt:t.key}),Object(w.jsx)("div",{className:"flex-1 mx-3 text-left",children:i({id:t.key})}),Object(w.jsx)("div",{children:s===t.key?Object(w.jsx)(A.j,{className:"w-6 h-6 text-btn-secondary-light"}):Object(w.jsx)(A.i,{className:"w-6 h-6 text-btn-primary-light"})})]},t.key)),"amex"===t.key&&e.push(Object(w.jsxs)("button",{onClick:function(){return v(t.key)},className:" ".concat(s===t.key&&"bg-main-color text-main-text border-main-color"," mb-3 flex border items-center justify-start rounded p-2 font-semibold"),children:[Object(w.jsx)("img",{src:z.a,alt:t.key}),Object(w.jsx)("div",{className:"flex-1 mx-3 text-left",children:i({id:t.key})}),Object(w.jsx)("div",{children:s===t.key?Object(w.jsx)(A.j,{className:"w-6 h-6 text-btn-secondary-light"}):Object(w.jsx)(A.i,{className:"w-6 h-6 text-btn-primary-light"})})]},t.key)),"cod"===t.key&&e.push(Object(w.jsxs)("button",{onClick:function(){return v(t.key)},className:" ".concat(s===t.key&&"bg-main-color text-main-text border-main-color"," mb-3 flex border items-center justify-start rounded p-2 font-semibold"),children:[Object(w.jsx)("img",{src:q.a,alt:t.key}),Object(w.jsx)("div",{className:"flex-1 mx-3 text-left",children:i({id:"cash-on-delivery"})}),Object(w.jsx)("div",{children:s===t.key?Object(w.jsx)(A.j,{className:"w-6 h-6 text-main-text"}):Object(w.jsx)(A.i,{className:"w-6 h-6 text-main-color"})})]},t.key))})),e}()})})]})})]}),Object(w.jsxs)("div",{className:"flex justify-end items-center p-3",children:[Object(w.jsx)("button",{className:"px-3 py-1 uppercase bg-main-color text-main-text rounded font-semibold",onClick:t,children:i({id:"btn-back-to-addresses"})}),Object(w.jsx)("button",{disabled:!s,className:"\n              ".concat(s?"bg-main-color text-main-text":"bg-gray-600 text-gray-100","\n             flex items-center justify-center uppercase px-3 py-1 mx-3  rounded font-semibold"),onClick:n,children:l?Object(w.jsx)(u.a,{type:"ThreeDots",color:"#fff",height:24,width:24,visible:!0}):i({id:"btn-proceed"})})]})]})}var I=a(54),U=a(19),V=a(55);function F(){var e=Object(I.a)(U.i,{throwOnError:!0}),t=Object(i.a)(e,2),a=t[0],s=t[1].isLoading,d=o.a.useContext(D.a),m=d.cartItems,x=d.cartItemsLoading,h=d.coupon,O=o.a.useContext(H.a).deliveryCountry,p=o.a.useState(0),f=Object(i.a)(p,2),v=f[0],y=f[1],g=o.a.useState(null),k=Object(i.a)(g,2),C=k[0],A=k[1],M=o.a.useState(null),T=Object(i.a)(M,2),q=T[0],z=T[1],B=o.a.useState(!1),F=Object(i.a)(B,2),W=F[0],E=F[1],Q=o.a.useState(""),X=Object(i.a)(Q,2),Y=X[0],K=X[1],J=Object(N.a)().formatMessage,P=o.a.useState({0:!1,1:!1,2:!1}),R=Object(i.a)(P,2),$=R[0],G=R[1],Z=function(){y(v+1),G(Object(r.a)(Object(r.a)({},$),{},Object(l.a)({},v,!0)))},ee=function(){var e=Object(n.a)(c.a.mark((function e(){var t,s,n,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={address:C.id,payment_method:q,order_type:"Kuwait"===(null===O||void 0===O?void 0:O.translation.en.name)?"local":"international"},e.prev=1,e.next=4,a({deliveryCountry:O,order:t,coupon:h});case 4:s=e.sent,G(Object(r.a)(Object(r.a)({},$),{},{1:!0})),"cod"===q?y(2):window.location.href=s.payment,e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(1),E(!0),"Coupon already used by this customer."!==(null===(n=e.t0.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)){e.next=14;break}return e.abrupt("return",K(J({id:"coupon-limit-reached"})));case 14:K(J({id:"something-went-wrong-snackbar"}));case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return o.a.useEffect((function(){window.scrollTo(0,0)}),[v]),x?Object(w.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:Object(w.jsx)(u.a,{type:"ThreeDots",color:"#b72b2b",height:50,width:50,visible:!0})}):x||0!==m.length?Object(w.jsx)(_.a,{children:Object(w.jsxs)("div",{className:"xxl:max-w-default md:max-w-screen-xl mx-auto",children:[W&&Object(w.jsx)(V.a,{message:Y,closeFunction:function(){E(!1)}}),Object(w.jsx)(b.a,{selectedStep:v,stepDone:$}),Object(w.jsxs)("div",{className:"mb-3",style:{minHeight:"calc(100vh - 150px)"},children:[0===v&&Object(w.jsx)(S,{handleSelectAddress:function(e){A(e),Z()}}),1===v&&Object(w.jsx)(L,{handleStepBack:function(){0!==v&&(y(v-1),G(Object(r.a)(Object(r.a)({},$),{},Object(l.a)({},v-1,!1))))},selectedAddress:C,paymentMethod:q,setPaymentMethod:z,handleCheckout:ee,checkoutLoading:s}),2===v&&Object(w.jsx)(j.a,{})]})]})}):Object(w.jsx)(_.a,{children:Object(w.jsx)("div",{className:"flex items-center justify-center mx-auto text-center",style:{height:"calc(100vh - 56px)",maxWidth:"600px"},children:Object(w.jsx)("h1",{className:"text-2xl font-semibold",children:J({id:"checkout-cart-empty"})})})})}}}]);
//# sourceMappingURL=18.e64bbf5d.chunk.js.map