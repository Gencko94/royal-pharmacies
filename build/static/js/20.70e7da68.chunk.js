(this.webpackJsonpattiahmall=this.webpackJsonpattiahmall||[]).push([[20],{286:function(e,t,a){"use strict";a.d(t,"a",(function(){return z}));var l=a(2),n=a(1),r=a.n(n),c=a(11),s=a.n(c),m=a(17),i=a.n(m),o=(a(30),a(151)),d=a(104),u=a(152),b=a(43),p=a(36),h=a(3),f=a.n(h),E=a(13),x=a(8),v=a(31),y=a(63),g=a(23),N=a(54),k=a(19),j=a(42),w=a(7),O=[{value:"+965",label:"+965"},{value:"+966",label:"+966"}];function C(e){var t=e.markerAddress,a=e.setShowMap,n=e.marker,c=e.setMarker,s=e.outOfBorder,m=r.a.useState(O[0]),o=Object(l.a)(m,2),d=o[0],u=o[1],b=r.a.useContext(k.a).addAddressMutation,p=r.a.useState(""),h=Object(l.a)(p,2),N=h[0],C=h[1],M=r.a.useState(!1),T=Object(l.a)(M,2),q=T[0],z=T[1],D=Object(y.a)().formatMessage,L=r.a.useState(!1),B=Object(l.a)(L,2),H=B[0],I=B[1],U=g.a({apartmentOrHouseNumber:g.c().required(D({id:"required-field"})),buildingOrTowerNumber:g.c().required(D({id:"required-field"})),addressName:g.c().required(D({id:"required-field"})),phoneNumber:g.c().matches(/^\d+$/,D({id:"number-only"})).min(8,D({id:"invalid-phone"})).required(D({id:"required-field"})),additionalDetails:g.c()});return r.a.createElement("div",null,r.a.createElement(w.a,null,q&&r.a.createElement(j.a,{message:D({id:"something-went-wrong-snackbar"}),closeFunction:function(){z(!1)}})),r.a.createElement("div",{className:"font-bold p-2"},r.a.createElement("h1",null,D({id:"location-details"}))),r.a.createElement("div",{className:"p-2"},r.a.createElement("div",{className:"flex items-center justify-between"},r.a.createElement("label",{htmlFor:"location",className:"text-sm font-bold text-gray-700"},D({id:"delivery-location"})),r.a.createElement("button",{onClick:function(){c(null),C("")},className:"text-main-color text-sm hover:underline"},D({id:"clear"}))),r.a.createElement("textarea",{rows:"3",id:"location",className:" mt-1 w-full rounded border  p-1  ",type:"textarea",value:t||N,readOnly:t,onChange:function(e){return C(e.target.value)}}),r.a.createElement(v.a,{initialValues:{apartmentOrHouseNumber:"",buildingOrTowerNumber:"",phoneNumber:"",additionalDetails:"",addressName:""},validationSchema:U,onSubmit:function(){var e=Object(x.a)(f.a.mark((function e(l){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b({lat:null===n||void 0===n?void 0:n.lat,lng:null===n||void 0===n?void 0:n.lng,defaultLocation:H,addressDetails:Object(E.a)(Object(E.a)({phoneNumber:"".concat(d.value).concat(l.phoneNumber)},l),{},{markerAddress:t,userTyped_address:N})});case 3:a(!1),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),z(!0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var a=e.handleSubmit,l=e.values,n=e.isSubmitting;return r.a.createElement("form",{onSubmit:a},r.a.createElement(A,{label:D({id:"maps-detailed-address-phone"}),name:"phoneNumber",value:l.phoneNumber,type:"text",countryCode:d,setCountryCode:u}),r.a.createElement("div",{className:"grid grid-cols-2 gap-1"},r.a.createElement(S,{label:D({id:"maps-detailed-address-apartment"}),name:"apartmentOrHouseNumber",value:l.apartmentOrHouseNumber,type:"text"}),r.a.createElement(S,{label:D({id:"maps-detailed-address-building"}),name:"buildingOrTowerNumber",value:l.buildingOrTowerNumber,type:"text"})),r.a.createElement(S,{label:D({id:"maps-detailed-address-name"}),name:"addressName",value:l.addressName,type:"text"}),r.a.createElement(_,{label:D({id:"maps-details-extra-details"}),name:"additionalDetails",value:l.additionalDetails}),r.a.createElement("div",{className:" "},r.a.createElement("div",{className:"flex items-center mb-2"},r.a.createElement("label",null,D({id:"mark-as-default"})),r.a.createElement("input",{className:" mx-2",type:"checkbox",checked:H,onChange:function(){return I(!H)}})),r.a.createElement("button",{type:"submit",disabled:!t&&!N||s,className:"  ".concat(!t&&!N||s?"bg-gray-500 text-gray-300":"bg-main-color text-main-text"," p-2 rounded  w-full  flex items-center uppercase justify-center font-semibold")},n?r.a.createElement(i.a,{type:"ThreeDots",color:"#fff",height:23,width:23,visible:n}):r.a.createElement("h1",null,D({id:"confirm-btn"})))))}))))}var S=function(e){var t=e.label,a=(e.value,e.name),n=Object(p.a)(e,["label","value","name"]),c=Object(v.b)(a),s=Object(l.a)(c,2),m=s[0],i=s[1];return r.a.createElement("div",{className:"w-full mb-1 relative"},r.a.createElement("label",{htmlFor:a,className:"text-sm font-bold text-gray-700 mb-1"},t),r.a.createElement("input",Object.assign({},m,n,{onBlur:function(e){m.onBlur(e)},className:" w-full rounded-sm border   p-1"})),i.touched&&i.error?r.a.createElement("h1",{className:"text-xs text-main-color mt-1"},i.error):r.a.createElement("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"}}," "))},_=function(e){var t=e.label,a=(e.value,e.name),n=Object(p.a)(e,["label","value","name"]),c=Object(v.b)(a),s=Object(l.a)(c,1)[0],m=Object(y.a)().formatMessage;return r.a.createElement("div",{className:"w-full mb-1 relative"},r.a.createElement("div",{className:"flex items-center mb-1"},r.a.createElement("label",{htmlFor:a,className:"text-sm font-bold text-gray-700"},t),r.a.createElement("h1",{className:"text-xs italic mx-3"},"(",m({id:"maps-details-optional"}),")")),r.a.createElement("textarea",Object.assign({rows:3},s,n,{onBlur:function(e){s.onBlur(e)},className:" w-full rounded-sm border   p-1"})))},A=function(e){var t=e.label,a=(e.value,e.name),n=e.countryCode,c=e.setCountryCode,s=Object(p.a)(e,["label","value","name","countryCode","setCountryCode"]),m=Object(v.b)(a),i=Object(l.a)(m,2),o=i[0],d=i[1];return r.a.createElement("div",{className:"w-full mb-1 flex flex-col "},r.a.createElement("label",{htmlFor:a,className:"text-sm font-bold text-gray-800 mb-1"},t),r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"0.4fr 1fr",gap:"0.5rem"}},r.a.createElement(N.a,{options:O,isSearchable:!1,value:n,onChange:c,styles:{dropdownIndicator:function(e){return Object(E.a)(Object(E.a)({},e),{},{padding:"0.25rem"})},valueContainer:function(e){return Object(E.a)(Object(E.a)({},e),{},{padding:"0.5rem"})}}}),r.a.createElement("input",Object.assign({},o,s,{onBlur:function(e){o.onBlur(e)},className:" border rounded w-full p-2 ".concat(d.error&&"border-main-color")}))),d.touched&&d.error?r.a.createElement("h1",{className:"text-xs text-main-color mt-1"},d.error):r.a.createElement("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"}}," "))},M=["places"],T={lat:29.3759,lng:47.9774},q={styles:o.a,disableDefaultUI:!0,zoomControl:!0};function z(e){var t=e.setShowMap,a=Object(b.useMediaQuery)({query:"(min-width: 768px)"}),n=r.a.useState(!1),c=Object(l.a)(n,2),m=c[0],o=c[1],p=Object(y.a)(),h=p.formatMessage,f=p.locale,E=Object(d.d)({googleMapsApiKey:"AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg",libraries:M,language:f}),x=E.isLoaded,v=E.loadError,g=r.a.useState(null),N=Object(l.a)(g,2),k=N[0],j=N[1],w=r.a.useState(null),O=Object(l.a)(w,2),S=O[0],_=O[1],A=r.a.useState(null),z=Object(l.a)(A,2),D=z[0],L=z[1],B=r.a.useRef(),H=r.a.useCallback((function(e){B.current=e}),[]),I=r.a.useCallback((function(e){var t=e.lat,a=e.lng;B.current.panTo({lat:t,lng:a}),j({lat:t,lng:a}),_(null)}),[]);return r.a.useEffect((function(){k?s.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(k.lat,",").concat(k.lng,"&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg","&language=").concat(f)).then((function(e){if(0===e.data.results.length)return L(null),_(null),void o(!0);"KW"!==e.data.results[0].address_components.find((function(e){return e.types.includes("country")})).short_name||0===e.data.results.length?o(!0):!0===m&&o(!1),L("".concat(e.data.results[0].formatted_address)),_("".concat(e.data.results[0].address_components.map((function(e){return e.short_name})).join(", ")))})).catch((function(e){})):(L(null),_(null))}),[k,f]),v?r.a.createElement("div",{className:"flex justify-center items-center h-full"},r.a.createElement("h1",null,h({id:"error-loading-maps"}))):x?r.a.createElement("div",{className:"".concat(a?"my-addresses-desktop-maps__grid":"my-addresses-mobile-maps__grid")},r.a.createElement("div",{className:"relative h-full"},r.a.createElement(u.a,{panTo:I,markerAddress:D}),r.a.createElement(d.a,{mapContainerStyle:{width:"100%",height:a?"100%":"400px"},zoom:15,center:T,options:q,clickableIcons:!1,onLoad:H,onClick:function(e){j({lat:e.latLng.lat(),lng:e.latLng.lng()})}},k&&r.a.createElement(d.c,{position:{lat:null===k||void 0===k?void 0:k.lat,lng:null===k||void 0===k?void 0:k.lng}}),m&&r.a.createElement("div",{className:"absolute mx-2 rounded p-2  bg-main-color text-main-text text-center",style:{top:"110px",left:"2%",right:"2%",width:"94%"}},r.a.createElement("h1",{className:"text-sm"},h({id:"out-of-border"}))),S&&r.a.createElement(d.b,{onCloseClick:function(){return _(null)},position:{lat:null===k||void 0===k?void 0:k.lat,lng:null===k||void 0===k?void 0:k.lng},options:{pixelOffset:new window.google.maps.Size(0,-50)}},r.a.createElement("div",{className:"p-2"},r.a.createElement("div",null,r.a.createElement("h1",null,S)))))),r.a.createElement(C,{markerAddress:D,marker:k,setShowMap:t,setMarker:j,outOfBorder:m})):r.a.createElement("div",{className:"flex justify-center items-center h-full"},r.a.createElement(i.a,{type:"ThreeDots",color:"#b72b2b",height:40,width:40,visible:!x}))}},338:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return V}));var l=a(3),n=a.n(l),r=a(8),c=a(29),s=a(13),m=a(2),i=a(1),o=a.n(i),d=a(168),u=a(20),b=a(63),p=a(108),h=a.n(p),f=a(109),E=a.n(f),x=a(17),v=a.n(x),y=(a(30),a(112)),g=a.n(y),N=a(110),k=a.n(N),j=a(9),w=a(35),O=a(6);function C(e){var t=e.handleStepBack,a=e.selectedAddress,l=e.paymentMethod,n=e.setPaymentMethod,r=e.handleCheckout,c=e.checkoutLoading,s=Object(b.a)(),m=s.formatMessage,i=s.locale,d=o.a.useContext(j.a).deliveryCountry,p=o.a.useContext(w.a),f=p.cartItems,x=p.cartSubtotal,y=p.cartTotal,N=p.shippingCost,C=p.couponCost,S=p.coupon,_=function(e){n(e)};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"quick-checkout-personal-info-mobile__container"},o.a.createElement("div",{className:"flex flex-col justify-center font-semibold text-sm px-2 "},o.a.createElement("div",{className:""},o.a.createElement("div",{className:"p-2 border-b"},o.a.createElement("h1",{className:" text-center text-base",style:{fontWeight:900}},m({id:"order-receipt"}))),o.a.createElement("div",{className:"my-orders-items__table-mobile font-semibold text-center mb-1 py-2"},o.a.createElement("h1",null,"#"),o.a.createElement("h1",null,m({id:"the-item"})),o.a.createElement("h1",null,m({id:"quantity"})),o.a.createElement("h1",null,m({id:"price"})),o.a.createElement("h1",null,m({id:"total"}))),null===f||void 0===f?void 0:f.map((function(e,t){return o.a.createElement("div",{key:e.id,className:"my-orders-item-mobile text-sm text-center mb-1"},o.a.createElement("div",{className:""},o.a.createElement("h1",{className:""},t+1)),o.a.createElement(O.b,{to:"/".concat(i,"/products/").concat(e.slug,"/").concat(e.id),className:"hover:underline block truncate"},o.a.createElement("h1",{className:"truncate  font-semibold"},e["name_".concat(i)])),o.a.createElement("div",{className:""},o.a.createElement("h1",{className:""},e.qty)),o.a.createElement("div",{style:{fontWeight:900}},o.a.createElement("h1",{className:""},e.price)),o.a.createElement("div",{style:{fontWeight:900},className:"text-green-700"},o.a.createElement("h1",{className:""},e.total," ",null===d||void 0===d?void 0:d.currency.translation[i].symbol)))})),o.a.createElement("hr",{className:"my-3"}),o.a.createElement("div",{className:"my-orders-receipt-summary font-bold"},o.a.createElement("h1",null,m({id:"cart-total"})),o.a.createElement("h1",{className:"text-center"},x,o.a.createElement("span",{className:"mx-1"},null===d||void 0===d?void 0:d.currency.translation[i].symbol)),o.a.createElement("h1",null,m({id:"cart-delivery-cost"})),o.a.createElement("h1",{className:" text-center"},"0"===N?m({id:"cart-free"}):N,o.a.createElement("span",{className:"mx-1"},null===d||void 0===d?void 0:d.currency.translation[i].symbol)),S&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",{className:""},m({id:"coupon-sale"})),o.a.createElement("h1",{className:"text-center text-green-700"},C,o.a.createElement("span",{className:"mx-1"},null===d||void 0===d?void 0:d.currency.translation[i].symbol))),o.a.createElement("h1",{className:"text-green-700 mt-3 text-lg font-bold"},m({id:"subtotal"})),o.a.createElement("h1",{className:"text-green-700 text-center mt-3 text-lg font-bold"},y," ",null===d||void 0===d?void 0:d.currency.translation[i].symbol))),o.a.createElement("div",{className:""},o.a.createElement("div",{className:"p-2 border-b"},o.a.createElement("h1",{style:{fontWeight:900},className:"text-center"},m({id:"delivery-address"}))),o.a.createElement("div",{className:" p-2",style:{display:"grid",gridTemplateColumns:"1fr 0.7fr"}},o.a.createElement("div",null,o.a.createElement("div",{className:"mb-2"},o.a.createElement("h1",{className:" text-gray-700"},m({id:"delivery-location"})," "),o.a.createElement("h1",null,(null===a||void 0===a?void 0:a.marked_address)||(null===a||void 0===a?void 0:a.userTyped_address))),o.a.createElement("div",{className:" mb-2"},o.a.createElement("div",null,o.a.createElement("h1",{className:" text-gray-700"},m({id:"maps-detailed-address-apartment"})," "),o.a.createElement("h1",null,null===a||void 0===a?void 0:a.apartment_house_number)),o.a.createElement("div",null,o.a.createElement("h1",{className:"font-semibold text-gray-700"},m({id:"maps-detailed-address-building"})," "),o.a.createElement("h1",null,null===a||void 0===a?void 0:a.building_tower_number))),o.a.createElement("div",{className:""},o.a.createElement("div",null,o.a.createElement("h1",{className:"font-semibold text-gray-700"},m({id:"maps-details-extra-details"})," ",":"," "),o.a.createElement("h1",{className:""},(null===a||void 0===a?void 0:a.addition_direction)||m({id:"none"}))))),(null===a||void 0===a?void 0:a.lat)&&o.a.createElement("img",{src:"https://maps.googleapis.com/maps/api/staticmap?center=".concat(a.lat,",").concat(a.lng,"&zoom=15&size=200x200&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg"),alt:"map",className:"self-start"})))),o.a.createElement("hr",{className:"my-5"}),o.a.createElement("div",{className:" mb-2 relative font-semibold  "},o.a.createElement("div",{className:"mb-1"},o.a.createElement("h1",{className:"text-center",style:{fontWeight:900}},m({id:"select-payment-method"}))),o.a.createElement("div",{className:"p-2"},o.a.createElement("div",{className:"flex flex-col "},function(){var e=[];if(d)return d.payment.forEach((function(t){if(0===t.status)return null;"knet"===t.key&&e.push(o.a.createElement("button",{key:t.key,onClick:function(){return _(t.key)},className:" ".concat(l===t.key&&"bg-main-color text-main-text border-main-color"," mb-2 flex border text-sm items-center justify-start rounded-lg p-2 font-semibold")},o.a.createElement("img",{src:h.a,alt:t.key}),o.a.createElement("div",{className:"flex-1 mx-3 text-left"},m({id:t.key})),o.a.createElement("div",null,l===t.key?o.a.createElement(u.j,{className:"w-6 h-6 text-btn-secondary-light"}):o.a.createElement(u.i,{className:"w-6 h-6 text-btn-primary-light"})))),"credit"===t.key&&e.push(o.a.createElement("button",{key:t.key,onClick:function(){return _(t.key)},className:" ".concat(l===t.key&&"bg-main-color text-main-text border-main-color"," mb-2 flex border text-sm items-center justify-start rounded-lg p-2 font-semibold")},o.a.createElement("img",{src:E.a,alt:t.key}),o.a.createElement("div",{className:"flex-1 mx-3 text-left"},m({id:t.key})),o.a.createElement("div",null,l===t.key?o.a.createElement(u.j,{className:"w-6 h-6 text-btn-secondary-light"}):o.a.createElement(u.i,{className:"w-6 h-6 text-btn-primary-light"})))),"amex"===t.key&&e.push(o.a.createElement("button",{key:t.key,onClick:function(){return _(t.key)},className:" ".concat(l===t.key&&"bg-main-color text-main-text border-main-color"," mb-2 flex border text-sm items-center justify-start rounded-lg p-2 font-semibold")},o.a.createElement("img",{src:k.a,alt:t.key}),o.a.createElement("div",{className:"flex-1 mx-3 text-left"},m({id:t.key})),o.a.createElement("div",null,l===t.key?o.a.createElement(u.j,{className:"w-6 h-6 text-btn-secondary-light"}):o.a.createElement(u.i,{className:"w-6 h-6 text-btn-primary-light"})))),"cod"===t.key&&e.push(o.a.createElement("button",{key:t.key,onClick:function(){return _(t.key)},className:" ".concat(l===t.key&&"bg-main-color text-main-text border-main-color"," mb-2 flex border text-sm items-center justify-start rounded-lg p-2 font-semibold")},o.a.createElement("img",{src:g.a,alt:t.key}),o.a.createElement("div",{className:"flex-1 mx-3 text-left"},m({id:"cash-on-delivery"})),o.a.createElement("div",null,l===t.key?o.a.createElement(u.j,{className:"w-6 h-6 text-main-text"}):o.a.createElement(u.i,{className:"w-6 h-6 text-main-color"}))))})),e}())))),o.a.createElement("div",{className:"flex justify-end items-center"},o.a.createElement("button",{className:"px-3 py-1 text-sm uppercase bg-main-color text-main-text rounded font-semibold",onClick:t},m({id:"btn-back-to-addresses"})),o.a.createElement("button",{disabled:!l,className:"\n              ".concat(l?"bg-main-color text-main-text":"bg-gray-600 text-gray-100"," flex items-center text-sm justify-center uppercase px-3 py-1 mx-2  rounded font-semibold"),onClick:r},c?o.a.createElement(v.a,{type:"ThreeDots",color:"#fff",height:24,width:24,visible:!0}):m({id:"btn-proceed"}))))}var S=a(169),_=a(69),A=a(19),M=a(286),T=a(7),q=a(22),z=a(102),D=a.n(z);function L(e){var t=e.userAddresses,a=e.setShowMap,l=e.handleSelectAddress,n=Object(b.a)().formatMessage,r=o.a.useState(null),c=Object(m.a)(r,2),s=c[0],i=c[1],d={partial:{right:0,top:0,bottom:0,width:"20%"},full:{right:0,top:0,bottom:0,width:"100%"}};return o.a.createElement("div",{className:"min-h-full"},o.a.createElement("div",{className:" p-2 flex items-center justify-between bg-main-color text-main-text"},o.a.createElement("h1",{className:"text-sm font-semibold"},n({id:"select-address-header"}))),o.a.createElement(T.b,null,o.a.createElement(T.c.div,{layout:!0,className:"p-2 locations-grid__mobile"},t.map((function(e){return o.a.createElement(T.c.div,{layout:!0,key:e.id,className:" rounded border relative  bg-body-light"},o.a.createElement(T.c.div,{layout:!0},o.a.createElement("div",{style:{position:"relative"}},o.a.createElement("img",{src:"https://maps.googleapis.com/maps/api/staticmap?center=".concat(e.lat,",").concat(e.lng,"&zoom=15&size=350x250&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg"),alt:"thumbnail"}),o.a.createElement(T.c.div,{variants:d,initial:"partial",animate:s===e.id?"full":"partial",layout:!0,exit:"partial",onClick:function(){return t=e.id,void i(s===t?null:t);var t},className:"absolute overflow-hidden p-2 text-main-text  transition cursor-pointer duration-150 opacity-75 bg-gray-800"},o.a.createElement(q.m,{style:{left:"10px"},className:"absolute  top-1/2 transform  -translate-y-1/2  w-5 h-5"}),o.a.createElement(T.a,null,s===e.id&&o.a.createElement(T.c.div,{initial:{opacity:0},animate:{opacity:1,marginLeft:"35px"},exit:{opacity:0},layout:!0,className:"text-xs"},o.a.createElement("div",null,o.a.createElement("h1",null,n({id:"maps-detailed-address-apartment-short"}),":"),o.a.createElement("h1",null,e.apartment_house_number)),o.a.createElement("div",null,o.a.createElement("h1",null,n({id:"maps-detailed-address-building-short"}),":"),o.a.createElement("h1",null,e.building_tower_number)),o.a.createElement("div",null,o.a.createElement("h1",null,n({id:"maps-detailed-address-phone-short"}),":"),o.a.createElement("h1",null,e.phone_number)))))),o.a.createElement("div",{className:"p-1"},o.a.createElement("div",{className:"text-xs text-gray-600 font-semibold"},o.a.createElement("h1",null,e.address_name)),o.a.createElement("div",{className:"text-xs mb-2 font-semibold",style:{height:"50px"}},o.a.createElement("h1",null,e.marked_address||e.userTyped_addres),o.a.createElement("h1",null,e.addition_direction)),o.a.createElement("button",{onClick:function(){return l(e)},className:"w-full text-sm p-1 rounded uppercase \n                          bg-main-color\n                      } text-main-text"},n({id:"select-btn"})))))})),o.a.createElement("div",{className:"p-3 flex items-center justify-center "},o.a.createElement("button",{onClick:function(){return a(!0)},className:"p-3 flex items-center justify-center place-self-center justify-self-center bg-main-color hover:bg-red-900 transition duration-150 relative rounded-lg text-main-text"},o.a.createElement(D.a,{background:!0}),o.a.createElement(q.p,{className:"h-8 w-8"}))))))}function B(e){var t=e.handleSelectAddress,a=o.a.useState(!1),l=Object(m.a)(a,2),n=l[0],r=l[1],c=o.a.useContext(A.a),s=c.userAddresses;return c.userAddressesLoading?o.a.createElement("div",{className:"flex h-full justify-center items-center",style:{minHeight:"calc(100vh - 102px)"}},o.a.createElement(v.a,{type:"ThreeDots",color:"#b72b2b",height:40,width:40,visible:!0})):o.a.createElement("div",{className:"h-full"},0!==s.length&&!n&&o.a.createElement(L,{userAddresses:s,setShowMap:r,handleSelectAddress:t}),(0===s.length||n)&&o.a.createElement("div",{className:" border mb-2 h-full"},o.a.createElement(M.a,{setShowMap:r})))}var H=a(18),I=a(14),U=a(42);function V(){var e=o.a.useContext(j.a).deliveryCountry,t=o.a.useState(0),a=Object(m.a)(t,2),l=a[0],i=a[1],u=o.a.useState(null),p=Object(m.a)(u,2),h=p[0],f=p[1],E=o.a.useState(null),x=Object(m.a)(E,2),y=x[0],g=x[1],N=o.a.useState(!1),k=Object(m.a)(N,2),O=k[0],A=k[1],M=o.a.useState(""),T=Object(m.a)(M,2),q=T[0],z=T[1],D=o.a.useContext(w.a),L=D.cartItems,V=D.cartItemsLoading,F=D.coupon,W=o.a.useContext(j.a).authenticationLoading,Q=Object(b.a)().formatMessage,X=Object(I.b)(H.i,{throwOnError:!0}),Y=Object(m.a)(X,2),K=Y[0],J=Y[1].isLoading,P=o.a.useState({0:!1,1:!1,2:!1}),R=Object(m.a)(P,2),$=R[0],G=R[1],Z=function(){var t=Object(r.a)(n.a.mark((function t(){var a,l,r,c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={address:h.id,payment_method:y,order_type:"Kuwait"===(null===e||void 0===e?void 0:e.translation.en.name)?"local":"international"},t.prev=1,t.next=4,K({deliveryCountry:e,order:a,coupon:F});case 4:l=t.sent,G(Object(s.a)(Object(s.a)({},$),{},{1:!0})),"cod"===y?i(2):window.location.href=l.payment,t.next=15;break;case 9:if(t.prev=9,t.t0=t.catch(1),A(!0),"Coupon already used by this customer."!==(null===(r=t.t0.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message)){t.next=14;break}return t.abrupt("return",z(Q({id:"coupon-limit-reached"})));case 14:z(Q({id:"something-went-wrong-snackbar"}));case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();return o.a.useEffect((function(){window.scrollTo(0,0)}),[l]),V||W?o.a.createElement("div",{className:"flex items-center justify-center min-h-screen"},o.a.createElement(v.a,{type:"ThreeDots",color:"#b72b2b",height:50,width:50,visible:!0})):V||0!==L.length?o.a.createElement(_.a,null,O&&o.a.createElement(U.a,{message:q,closeFunction:function(){A(!1)}}),o.a.createElement("div",{className:"xxl:max-w-default md:max-w-screen-xl mx-auto"},o.a.createElement(S.a,{selectedStep:l,stepDone:$}),o.a.createElement("div",{className:"mb-3",style:{minHeight:"calc(100vh - 231px)"}},0===l&&o.a.createElement(B,{handleSelectAddress:function(e){f(e),i(l+1),G(Object(s.a)(Object(s.a)({},$),{},Object(c.a)({},l,!0)))}}),1===l&&o.a.createElement(C,{handleStepBack:function(){0!==l&&(i(l-1),G(Object(s.a)(Object(s.a)({},$),{},Object(c.a)({},l-1,!1))))},selectedAddress:h,paymentMethod:y,setPaymentMethod:g,handleCheckout:Z,checkoutLoading:J}),2===l&&o.a.createElement(d.a,null)))):o.a.createElement(_.a,null,o.a.createElement("div",{className:"flex items-center justify-center mx-auto text-center",style:{height:"calc(100vh - 110px)",maxWidth:"360px"}},o.a.createElement("h1",{className:"text-lg font-semibold"},Q({id:"checkout-cart-empty"}))))}}}]);
//# sourceMappingURL=20.70e7da68.chunk.js.map