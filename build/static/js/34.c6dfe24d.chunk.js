(this["webpackJsonproyal-pharmacy"]=this["webpackJsonproyal-pharmacy"]||[]).push([[34],{335:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return A}));var l=a(3),r=a.n(l),n=a(6),s=a(12),c=a(2),m=a(35),i=a(29),o=a(1),d=a.n(o),u=a(64),b=a(4),x=a(16),E=a.n(x),p=(a(28),a(70)),h=a(54),f=a(24),y=a(43),v=a(7),N=a(17),g=a(5),w=a(110),j=a.n(w),k=a(111),_=a.n(k),C=a(115),O=a.n(C),S=a(112),M=a.n(S),q=a(13),z=a(277),T=a.n(z);function W(e){var t=e.orders,a=Object(u.a)().formatMessage,l=d.a.useState(!1),r=Object(c.a)(l,2),n=r[0],s=r[1],m=d.a.useState(null),i=Object(c.a)(m,2),o=i[0],b=i[1],x={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return 0===t.length?d.a.createElement("div",{className:"flex justify-center items-center",style:{height:"calc(100vh - 140px)"}},a({id:"no-orders-placed"})):d.a.createElement(g.b,null,d.a.createElement(g.c.div,{layout:!0,variants:{hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{staggerChildren:.1,when:"beforeChildren"}}},initial:"hidden",animate:"visible",className:" guest-orders-grid__desktop mb-6"},d.a.createElement("div",{className:"max-h-full p-3 overflow-y-auto"},t.map((function(e){return d.a.createElement(g.c.div,{layout:!0,onClick:function(){b(e.id),s(!0)},key:e.id,variants:x,className:"mb-3  mx-1 cursor-pointer w-full rounded-lg ".concat(o===e.id?"bg-gray-800":"bg-gray-900","  hover:bg-gray-800 transition duration-200 text-main-text")},function(e){switch(e){case"completed":return d.a.createElement("div",{className:" text-body-text-dark flex items-center rounded  px-3 py-2  font-semibold bg-green-700  "},d.a.createElement("h1",null,a({id:"order-status"})),":",d.a.createElement("h1",{className:"mx-1"},a({id:"order-completed"})));case"canceled":return d.a.createElement("div",{className:" text-body-text-dark flex items-center rounded px-3 py-2 font-semibold bg-main-color  "},d.a.createElement("h1",null,a({id:"order-status"})),":",d.a.createElement("h1",{className:"mx-1"},a({id:"order-cancelled"})));case"pending":return d.a.createElement("div",{className:" text-body-text-dark  flex items-center rounded  px-3 py-2  font-semibold bg-yellow-600  "},d.a.createElement("h1",null,a({id:"order-status"})),":",d.a.createElement("h1",{className:"mx-1"},a({id:"order-pending"})));case"delivery":return d.a.createElement("div",{className:" text-body-text-dark  flex items-center rounded  px-3 py-2 font-semibold bg-blue-600  "},d.a.createElement("h1",null,a({id:"order-status"})),":",d.a.createElement("h1",{className:"mx-1"},a({id:"order-delivery"})));case"waiting_for_payment":return d.a.createElement("div",{className:" text-body-text-dark flex items-center  rounded px-3 py-2 font-semibold bg-yellow-600  "},d.a.createElement("h1",null,a({id:"order-status"})),":",d.a.createElement("h1",{className:"mx-1"},a({id:"order-waiting-for-payment"})));case"confirmed":return d.a.createElement("div",{className:" text-body-text-dark flex items-center rounded px-3 py-2  font-semibold bg-blue-600  "},d.a.createElement("h1",null,a({id:"order-status"})),":",d.a.createElement("h1",{className:"mx-1"},a({id:"order-confirmed"})));case"new":return d.a.createElement("div",{className:"text-body-text-dark px-3 py-2 rounded  font-semibold flex items-center  bg-blue-600  "},d.a.createElement("h1",null,a({id:"order-status"})),":",d.a.createElement("h1",{className:"mx-1"},a({id:"order-new"})))}}(e.status),d.a.createElement("div",{className:"p-3"},d.a.createElement("div",{className:"flex items-center font-bold"},d.a.createElement("h1",null,a({id:"order-number"})),d.a.createElement("h1",{className:"mx-1"},e.id)),d.a.createElement("div",{className:"flex items-center font-bold"},d.a.createElement("h1",null,a({id:"order-date"})),d.a.createElement("h1",{className:"mx-1"},T()(e.created_at).format("DD/MM/YYYY - HH:MM"))),d.a.createElement("div",{className:"flex items-center text-sm"},d.a.createElement("h1",{className:"text-gray-600"},"completed"===e.status?a({id:"delivery-status"}):a({id:"expected-delivery"})," ",":"),d.a.createElement("h1",{className:"mx-1"},"completed"===e.status?a({id:"delivered"}):"Soon")),d.a.createElement("div",{className:"text-sm"},d.a.createElement("h1",{className:"text-gray-600"},a({id:"payment-method"})," :"),"knet"===(t=e.payment_method)?d.a.createElement("div",{className:"  flex  items-center justify-start  p-2 font-semibold"},d.a.createElement("img",{src:j.a,alt:t}),d.a.createElement("div",{className:"flex-1 mx-3 text-left"},"K-net")):"credit"===t?d.a.createElement("div",{className:"  flex  items-center justify-start  p-2 font-semibold"},d.a.createElement("img",{src:_.a,alt:t}),d.a.createElement("div",{className:"flex-1 mx-3 text-left"},"Credit Card")):"amex"===t?d.a.createElement("div",{className:" flex  items-center justify-start  p-2 font-semibold"},d.a.createElement("img",{src:M.a,alt:t}),d.a.createElement("div",{className:"flex-1 mx-3 text-left"},"American Express")):"cod"===t?d.a.createElement("div",{className:"  flex  items-center justify-start  p-2 font-semibold"},d.a.createElement("img",{src:O.a,alt:t}),d.a.createElement("div",{className:"flex-1 mx-3 text-left"},a({id:"cash-on-delivery"}))):void 0)));var t}))),d.a.createElement("div",{className:"shadow rounded-lg max-h-full overflow-y-auto"},!o&&d.a.createElement("div",{className:"text-2xl p-3 h-full flex items-center justify-center font-semibold"},a({id:"select-order-to-display"})),d.a.createElement(g.a,null,n&&d.a.createElement(Y,{id:o})))))}var Y=function(e){var t=e.id,a=Object(u.a)(),l=a.locale,r=a.formatMessage,n=d.a.useContext(v.a).deliveryCountry,s=Object(q.c)(["single-guest-order",t],N.B,{retry:!0,refetchOnWindowFocus:!1}),c=s.data;return s.isLoading?d.a.createElement("div",{className:"flex h-full justify-center items-center"},d.a.createElement(E.a,{type:"ThreeDots",color:"#b72b2b",height:40,width:40,visible:!0})):d.a.createElement(g.c.div,{variants:{hidden:{opacity:0},visible:{opacity:1},exited:{opacity:0}},initial:"hidden",animate:"visible",exit:"exited"},d.a.createElement("div",{className:"p-2 border-b"},d.a.createElement("h1",{className:"font-bold text-xl"},r({id:"delivery"}))),d.a.createElement(g.c.div,{className:"flex justify-between p-2",layout:!0},d.a.createElement("div",null,d.a.createElement("div",{className:" font-semibold"},d.a.createElement("h1",{className:"text-gray-700 font-bold text-lg"},r({id:"full-name"})),d.a.createElement("h1",null,c.address.customer.name)),c.address.customer.email&&d.a.createElement("div",{className:" font-semibold"},d.a.createElement("h1",{className:"text-gray-700 font-bold text-lg"},r({id:"full-name"})),d.a.createElement("h1",null,c.address.customer.email)),d.a.createElement("div",{className:" font-semibold"},d.a.createElement("h1",{className:"text-gray-700 font-bold text-lg"},r({id:"phone-number"})),d.a.createElement("h1",null,c.address.customer.mobile)),d.a.createElement("div",{className:" font-semibold"},d.a.createElement("h1",{className:"text-gray-700 font-bold text-lg"},r({id:"location"})),d.a.createElement("h1",null,"".concat("map"===c.address.type?c.address.marked_address:c.address.userTyped_address))),d.a.createElement("div",{className:"font-semibold"},d.a.createElement("h1",{className:"text-gray-700 text-lg font-bold"},r({id:"maps-detailed-address-apartment"})),d.a.createElement("h1",null,c.address.apartment_house_number)),c.address.building_tower_number&&d.a.createElement("div",{className:"font-semibold"},d.a.createElement("h1",{className:"text-gray-800  font-bold"},r({id:"maps-detailed-address-building"})),d.a.createElement("h1",null,c.address.building_tower_number)),c.address.addition_direction&&d.a.createElement("div",{className:"font-semibold"},d.a.createElement("h1",{className:"text-gray-800 font-bold"},r({id:"maps-details-extra-details"})),d.a.createElement("h1",null,c.address.addition_direction))),d.a.createElement(g.c.div,{layout:!0},"map"===c.address.type&&c.address.lat&&d.a.createElement("img",{src:"https://maps.googleapis.com/maps/api/staticmap?center=".concat(c.address.lat,",").concat(c.address.lng,"&zoom=15&size=150x150&\n              markers=color:blue%7C").concat(c.address.lat,"-").concat(c.address.lng,"&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg"),alt:"map"}))),d.a.createElement("hr",{className:"my-4"}),d.a.createElement("div",{className:"p-2 border-b"},d.a.createElement("h1",{className:"font-bold text-xl"},r({id:"order-receipt"}))),d.a.createElement("div",{className:"p-2 text-lg"},d.a.createElement("div",{className:"my-orders-items__table-desktop font-semibold text-center mb-3"},d.a.createElement("h1",null,"#"),d.a.createElement("h1",null,r({id:"the-item"})),d.a.createElement("h1",null,r({id:"quantity"})),d.a.createElement("h1",null,r({id:"price"})),d.a.createElement("h1",null,r({id:"total"}))),c.items.map((function(e,t){return d.a.createElement("div",{key:e.id,className:"my-orders-item-desktop text-base text-center"},d.a.createElement("div",{className:""},d.a.createElement("h1",{className:""},t+1)),d.a.createElement(b.b,{to:"/".concat(l,"/products/").concat(e.product.slug,"/").concat(e.id),className:"hover:underline truncate uppercase font-semibold block"},e.product.translation[l].title),d.a.createElement("div",{className:""},d.a.createElement("h1",{className:""},e.qty)),d.a.createElement("div",{style:{fontWeight:900}},d.a.createElement("h1",{className:""},e.price," ")),d.a.createElement("div",{style:{fontWeight:900},className:"text-green-700"},d.a.createElement("h1",{className:""},(e.price*e.qty).toFixed(3)," ",null===n||void 0===n?void 0:n.currency.translation[l].symbol)))})),d.a.createElement("hr",{className:"my-3"}),d.a.createElement("div",{className:"my-orders-receipt-summary font-bold"},d.a.createElement("h1",null,r({id:"cart-total"})),d.a.createElement("h1",{className:"text-center"},c.subtotal," ",d.a.createElement("span",{className:"mx-1"},null===n||void 0===n?void 0:n.currency.translation[l].symbol)),d.a.createElement("h1",null,r({id:"cart-delivery-cost"})),d.a.createElement("h1",{className:"text-center"},"0"===c.shipping_cost?r({id:"cart-free"}):c.shipping_cost," ",d.a.createElement("span",{className:"mx-1"},null===n||void 0===n?void 0:n.currency.translation[l].symbol)),"0.000"!==c.coupon_cost&&d.a.createElement("h1",{className:"mb-2 text-green-700"},r({id:"coupon-sale"})),"0.000"!==c.coupon_cost&&d.a.createElement("h1",{className:"mb-2 text-center text-green-700"},c.coupon_cost,d.a.createElement("span",{className:"mx-1"},null===n||void 0===n?void 0:n.currency.translation[l].symbol)),d.a.createElement("h1",{className:"text-green-700 text-xl font-bold",style:{fontWeight:900}},r({id:"subtotal"})),d.a.createElement("h1",{className:"text-green-700 text-lg font-bold text-center",style:{fontWeight:900}},c.total," ",null===n||void 0===n?void 0:n.currency.translation[l].symbol))))},D=[{value:"+965",label:"+965"},{value:"+966",label:"+966"}],F=function(e){var t=e.label,a=(e.value,e.name),l=e.countryCode,r=e.setCountryCode,n=Object(m.a)(e,["label","value","name","countryCode","setCountryCode"]),o=Object(i.b)(a),u=Object(c.a)(o,2),b=u[0],x=u[1];return d.a.createElement("div",{className:"w-full mb-2 flex flex-col "},d.a.createElement("label",{htmlFor:a,className:"text-sm font-semibold text-gray-800 mb-1"},t),d.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"0.5fr 1fr",gap:"0.5rem"}},d.a.createElement(h.a,{options:D,isSearchable:!1,value:l,onChange:r,styles:{dropdownIndicator:function(e){return Object(s.a)(Object(s.a)({},e),{},{padding:"0.25rem"})},valueContainer:function(e){return Object(s.a)(Object(s.a)({},e),{},{padding:"0.5rem"})}}}),d.a.createElement("input",Object.assign({},b,n,{onBlur:function(e){b.onBlur(e)},className:" border rounded w-full p-2 ".concat(x.error&&"border-main-color")}))),x.touched&&x.error?d.a.createElement("h1",{className:"text-xs text-main-color mt-1"},x.error):d.a.createElement("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"}}," "))};function A(){var e=d.a.useContext(v.a).settings,t=d.a.useState(D[0]),a=Object(c.a)(t,2),l=a[0],s=a[1],m=Object(u.a)(),o=m.formatMessage,x=m.locale,h=d.a.useState(!1),w=Object(c.a)(h,2),j=w[0],k=w[1],_=d.a.useState(""),C=Object(c.a)(_,2),O=C[0],S=C[1],M=d.a.useState(!1),q=Object(c.a)(M,2),z=q[0],T=q[1],Y=d.a.useState([]),A=Object(c.a)(Y,2),B=A[0],H=A[1],V=f.a({phoneNumber:f.c().matches(/^\d+$/,o({id:"number-only"})).required(o({id:"phone-empty"}))});return d.a.createElement(p.a,null,d.a.createElement(g.a,null,!z&&d.a.createElement(g.c.div,{initial:!1,exit:{opacity:0},className:" text-gray-900 relative max-w-screen-sm mx-auto flex items-center justify-center",style:{height:"calc(100vh - 56px)"}},j&&d.a.createElement(y.a,{message:O,closeFunction:function(){k(!1)}}),d.a.createElement(g.c.div,{className:" z-2  overflow-hidden"},d.a.createElement("div",{className:"flex items-center flex-col mb-4  rounded-lg text-center "},d.a.createElement(b.b,{to:"/".concat(x,"/")},d.a.createElement("img",{src:null===e||void 0===e?void 0:e.store_logo_color,alt:"",className:" mb-3",style:{width:"100px",height:"50px"}})),d.a.createElement("h2",{className:"text-xl mb-2 text-center font-bold"},o({id:"track-my-order"})),d.a.createElement("h1",{className:"font-semibold"},o({id:"track-order-enter-your-phone"}))),d.a.createElement("div",{className:"rounded-lg border bg-gray-100 mb-2"},d.a.createElement(i.a,{initialValues:{phoneNumber:""},validationSchema:V,onSubmit:function(){var e=Object(n.a)(r.a.mark((function e(t,a){var n,s,c,m,i,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!1),e.prev=1,e.next=4,Object(N.S)({phoneNumber:"".concat(l.value).concat(t.phoneNumber)});case 4:n=e.sent,H(n.orders),T(!0),a.setSubmitting(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),"user not exists"===(null===(s=e.t0.response)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.message)?(k(!0),S(o({id:"track-order-no-orders"}))):"The selected mobile is invalid."===(null===(m=e.t0.response)||void 0===m||null===(i=m.data)||void 0===i||null===(d=i.message)||void 0===d?void 0:d.mobile[0])?a.setErrors({phoneNumber:o({id:"invalid-phone"})}):(k(!0),S(o({id:"something-went-wrong-snackbar"})));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var t=e.handleSubmit,a=e.values,r=e.isSubmitting;return d.a.createElement("form",{className:"px-3 py-2",onSubmit:t},d.a.createElement(F,{label:o({id:"phone-label"}),name:"phoneNumber",value:a.phoneNumber,countryCode:l,setCountryCode:s}),d.a.createElement("div",{className:" py-1 mt-2"},d.a.createElement("button",{disabled:r,type:"submit",className:"".concat(r?"bg-main-color cursor-not-allowed":"bg-main-color text-main-text hover:bg-main-color"," w-full rounded uppercase flex items-center justify-center  p-2 font-semibold  transition duration-150 ")},d.a.createElement(E.a,{type:"ThreeDots",color:"#fff",height:24,width:24,visible:r}),!r&&o({id:"btn-track"}))))})))))),d.a.createElement(g.a,null,z&&d.a.createElement(W,{orders:B})))}}}]);
//# sourceMappingURL=34.c6dfe24d.chunk.js.map