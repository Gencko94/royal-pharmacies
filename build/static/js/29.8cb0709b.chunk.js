(this["webpackJsonproyal-pharmacy"]=this["webpackJsonproyal-pharmacy"]||[]).push([[29],{482:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return N}));var a=n(5),l=n(2),i=n.n(l),r=n(76),s=n(93),c=n(40),o=n(207),u=n(244),d=n(95),b=n(18),p=n(129),v=n(103),f=n(448),j=n(216),h=n(145),m=n(200),O=n.n(m),g=n(131),y=n(10),x=n(1);function N(){var e,t,n=Object(c.i)().query,l=Object(r.a)(),m=l.locale,N=l.formatMessage,w=i.a.useState([]),P=Object(a.a)(w,2),C=P[0],S=P[1],L=i.a.useState({value:"newest",label:"Newest"}),B=Object(a.a)(L,2),k=B[0],E=B[1],F=i.a.useState(1),M=Object(a.a)(F,2),I=M[0],R=M[1],q=i.a.useState(1),A=Object(a.a)(q,2),D=A[0],J=A[1],T=i.a.useState(!1),W=Object(a.a)(T,2),_=W[0],Y=W[1],z=i.a.useState(null),G=Object(a.a)(z,2),H=G[0],K=G[1],Q=i.a.useState([]),U=Object(a.a)(Q,2),V=U[0],X=U[1],Z=i.a.useState({label:20,value:20}),$=Object(a.a)(Z,2),ee=$[0],te=$[1],ne=i.a.useState(!1),ae=Object(a.a)(ne,2),le=ae[0],ie=ae[1],re=i.a.useState(!1),se=Object(a.a)(re,2),ce=se[0],oe=se[1],ue=i.a.useState(!1),de=Object(a.a)(ue,2),be=de[0],pe=de[1],ve=i.a.useState(!1),fe=Object(a.a)(ve,2),je=fe[0],he=fe[1],me=i.a.useContext(y.a),Oe=me.deliveryCountry,ge=me.sideMenuOpen;i.a.useEffect((function(){var e=function(){window.scrollY>=200?he(!0):he(!1)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}})),i.a.useEffect((function(){ce&&setTimeout((function(){return oe(!1)}),100),be&&setTimeout((function(){return pe(!1)}),100)}),[je]);var ye=Object(s.a)(["searchProducts",{query:n,page:I,resultsPerPage:ee}],b.R,{retry:!0,refetchOnWindowFocus:!1}),xe=ye.data,Ne=ye.isLoading,we=Object(s.a)(["filtered-products",{search:n,brandFilters:C,sortBy:k,page:D,resultsPerPage:ee,locale:m,priceFilters:H}],b.m,{retry:!0,refetchOnWindowFocus:!1,enabled:_}),Pe=we.data,Ce=we.isLoading;i.a.useEffect((function(){0===V.length?Y(!1):Y(!0)}),[V]);return Object(x.jsx)(d.a,{children:Object(x.jsxs)("div",{className:"min-h-screen relative",children:[Object(x.jsxs)(p.a,{children:[le&&Object(x.jsx)(j.a,{setSideMenuOpen:ie},"side-cart"),le&&Object(x.jsx)(v.a.div,{initial:{opacity:0},animate:{opacity:.5},exit:{opacity:0},onClick:function(){return ie(!1)},className:"side__addCart-bg"},"sidecart-bg")]}),!_&&(null===xe||void 0===xe?void 0:xe.products.length)>0&&!Ne||_&&(null===Pe||void 0===Pe?void 0:Pe.filteredProducts.length)>0&&!Ce?Object(x.jsx)("div",{className:"mb-1",children:Object(x.jsx)("div",{className:"px-3 pt-3",children:Object(x.jsxs)("h1",{className:"font-semibold text-lg",children:[(null===xe||void 0===xe?void 0:xe.products.length)>2&&(null===xe||void 0===xe?void 0:xe.products.length)," ",function(){switch(null===xe||void 0===xe?void 0:xe.products.length){case 1:return N({id:"one-search-result"});case 2:return N({id:"two-search-results"});case(null===xe||void 0===xe?void 0:xe.products.length)>10&&xe.products.length:return N({id:"more-than-10-search-results"});default:return N({id:"search-results"})}}()," ",Object(x.jsx)("strong",{children:n})]})})}):null,Object(x.jsx)(f.a,{children:Object(x.jsx)(v.a.div,{layout:!0,className:"px-3",children:0!==V.length&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(v.a.h1,{layout:!0,className:" mb-1 font-semibold",children:[N({id:"filtered-by"})," :"]}),Object(x.jsx)(v.a.div,{layout:!0,className:"flex items-center",children:V.map((function(e){return Object(x.jsxs)(v.a.button,{layout:!0,className:"mx-1 py-1 px-3 bg-main-color text-main-text rounded-full",onClick:function(){return t=e,X((function(e){return e.filter((function(e){return e.value!==t.value}))})),"Brand"===t.type&&S((function(e){return e.filter((function(e){return e.label!==t.value}))})),"Sort"===t.type&&E({value:"newest",label:"Newest"}),void("Price"===t.type&&X((function(e){return e.filter((function(e){return"Price"!==e.type}))})));var t},children:[N({id:e.type})," : ",e.value]},e.value)}))})]})})}),Object(x.jsx)("hr",{className:"my-3"}),Object(x.jsx)(o.a,{products:null===xe||void 0===xe?void 0:xe.products,productsLoading:Ne,setCartMenuOpen:ie,filteredProducts:null===Pe||void 0===Pe?void 0:Pe.filteredProducts,filteredProductsLoading:Ce,setProductsPage:R,filtersApplied:_,handleResultPerPageChange:function(e){te(e)}}),!_&&(null===xe||void 0===xe||null===(e=xe.products)||void 0===e?void 0:e.length)>0&&!Ne||_&&(null===Pe||void 0===Pe||null===(t=Pe.filteredProducts)||void 0===t?void 0:t.length)>0&&!Ce?Object(x.jsx)(O.a,{previousLabel:"ar"===m?Object(x.jsx)(g.b,{className:"w-6 h-6 inline"}):Object(x.jsx)(g.a,{className:"w-6 h-6 inline"}),nextLabel:"ar"===m?Object(x.jsx)(g.a,{className:"w-6 h-6 inline"}):Object(x.jsx)(g.b,{className:"w-6 h-6 inline"}),breakLabel:"...",breakClassName:"inline",pageCount:_?null===Pe||void 0===Pe?void 0:Pe.lastPage:null===xe||void 0===xe?void 0:xe.lastPage,marginPagesDisplayed:2,pageRangeDisplayed:2,initialPage:_?D-1:I-1,disableInitialCallback:!0,onPageChange:_?function(e){Object(h.a)(document.getElementById("main"),document.body),J(e.selected+1)}:function(e){Object(h.a)(document.getElementById("main"),document.body),R(e.selected+1)},containerClassName:"text-center my-2",subContainerClassName:"p-3 inline",pageLinkClassName:"p-3",activeClassName:"bg-main-color font-bold text-main-text",pageClassName:" inline-block mx-2 rounded-full text-lg",previousClassName:"p-3 inline font-bold",nextClassName:"p-3 inline font-bold",disabledClassName:"text-gray-500"}):null,Object(x.jsx)(p.a,{children:je&&!ge&&0!==(null===xe||void 0===xe?void 0:xe.products.length)&&Object(x.jsx)(u.a,{productsLoading:Ne,products:null===xe||void 0===xe?void 0:xe.products,brandFilters:C,filtersApplied:_,setSortByOpen:oe,setFiltersOpen:pe,filtersOpen:be,sortByOpen:ce,sortBy:k,handleSortByChange:function(e){if("newest"===e.value)return X((function(e){return e.filter((function(e){return"Sort"!==e.type}))})),void E(e);X((function(t){var n=t.filter((function(e){return"Sort"!==e.type}));return n.push({type:"Sort",value:e.label}),n})),E(e)},priceFilters:H,handleSubmitFilters:function(e,t){S(t),K(e),Object(h.b)(window,{top:300,behavior:"smooth"}),X((function(){if(e&&!t.length>0)return[{type:"Price",value:"".concat(N({id:"less-than"})," ").concat(e," ").concat(null===Oe||void 0===Oe?void 0:Oe.currency.translation[m].symbol)}];if(!e&&t.length>0){var n=[];return t.forEach((function(e){return n.push({type:"Brand",value:e.label})})),[].concat(n)}var a={type:"Price",value:"".concat(N({id:"less-than"})," ").concat(e," ").concat(null===Oe||void 0===Oe?void 0:Oe.currency.translation[m].symbol)},l=[];return t.forEach((function(e){return l.push({type:"Brand",value:e.label})})),[a].concat(l)}))}})})]})})}}}]);
//# sourceMappingURL=29.8cb0709b.chunk.js.map