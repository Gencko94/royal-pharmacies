(this["webpackJsonproyal-pharmacy"]=this["webpackJsonproyal-pharmacy"]||[]).push([[33],{510:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return Y}));var c=s(5),a=s(45),r=s(4),i=s.n(r),d=s(9),l=s(6),n=s(2),o=s.n(n),b=s(78),m=s(10),j=s(25),x=s(38),h=s(17),u=s.n(h),O=(s(37),s(69)),p=s(144),f=s(115),y=s(19),v=s(95),N=s(8),g=s(56),w=s(145),k=s(146),C=s(149),_=s(147),S=s(458),z=s.n(S),M=s(21),D=s(94),q=s(1);function F(e){var t=e.id,s=e.isOpen,c=e.handleOrderDetailsClose,a=Object(b.a)(),r=a.locale,i=a.formatMessage,d=o.a.useContext(m.a).deliveryCountry;o.a.useEffect((function(){return s&&(document.body.style.overflow="hidden"),function(){return document.body.style.overflow="unset"}}),[s]);var l=Object(D.a)(["single-guest-order",t],(function(){return Object(y.z)(t)}),{retry:!0,refetchOnWindowFocus:!1}),n=l.data,j=l.isLoading;return Object(q.jsxs)(f.a.div,{variants:{hidden:{y:"50%",opacity:0},visible:{y:0,opacity:1,transition:{type:"tween"}},exited:{x:"100%",opacity:0,transition:{type:"tween"}}},initial:"hidden",animate:"visible",exit:"exited",className:"fixed top-0 left-0 right-0 bottom-0 overflow-y-scroll bg-body-light z-30 h-screen",children:[Object(q.jsxs)("div",{className:" sticky top-0 p-3 flex items-center bg-main-color text-main-text z-1",children:[Object(q.jsx)("button",{className:"text-white text-center",onClick:c,children:"en"===r?Object(q.jsx)(M.f,{className:"w-6 h-6 "}):Object(q.jsx)(M.g,{className:"w-6 h-6 "})}),Object(q.jsx)("h1",{className:"font-semibold text-lg mx-4",children:i({id:"order-details"})})]}),j&&Object(q.jsx)("div",{className:"flex justify-center items-center",style:{height:"calc(100vh - 51px)"},children:Object(q.jsx)(u.a,{type:"ThreeDots",color:"#b72b2b",height:40,width:40,visible:!0})}),!j&&Object(q.jsxs)("div",{children:[Object(q.jsx)("div",{className:"p-2 border-b",children:Object(q.jsx)("h1",{className:"font-bold text-lg",children:i({id:"delivery"})})}),Object(q.jsxs)("div",{className:"p-2",children:[Object(q.jsxs)("div",{className:" font-semibold",children:[Object(q.jsx)("h1",{className:"text-gray-700 font-bold",children:i({id:"full-name"})}),Object(q.jsx)("h1",{className:"text-sm",children:n.address.customer.name})]}),n.address.customer.email&&Object(q.jsxs)("div",{className:" font-semibold",children:[Object(q.jsx)("h1",{className:"text-gray-700 font-bold ",children:i({id:"full-name"})}),Object(q.jsx)("h1",{className:"text-sm",children:n.address.customer.email})]}),Object(q.jsxs)("div",{className:" font-semibold",children:[Object(q.jsx)("h1",{className:"text-gray-700 font-bold",children:i({id:"phone-number"})}),Object(q.jsx)("h1",{className:"text-sm",children:n.address.customer.mobile})]}),Object(q.jsxs)("div",{className:" font-semibold",children:[Object(q.jsx)("h1",{className:"text-gray-700 font-bold ",children:i({id:"location"})}),Object(q.jsx)("h1",{className:"text-sm",children:"".concat("map"===n.address.type?n.address.marked_address:n.address.userTyped_address)})]}),Object(q.jsxs)("div",{className:"font-semibold",children:[Object(q.jsx)("h1",{className:"text-gray-700  font-bold",children:i({id:"maps-detailed-address-apartment"})}),Object(q.jsx)("h1",{className:"text-sm",children:n.address.apartment_house_number})]}),n.address.building_tower_number&&Object(q.jsxs)("div",{className:"font-semibold",children:[Object(q.jsx)("h1",{className:"text-gray-800  font-bold",children:i({id:"maps-detailed-address-building"})}),Object(q.jsx)("h1",{className:"text-sm",children:n.address.building_tower_number})]}),n.address.addition_direction&&Object(q.jsxs)("div",{className:"font-semibold",children:[Object(q.jsx)("h1",{className:"text-gray-800 font-bold",children:i({id:"maps-details-extra-details"})}),Object(q.jsx)("h1",{className:"text-sm",children:n.address.addition_direction})]}),Object(q.jsx)("div",{children:"map"===n.address.type&&n.address.lat&&Object(q.jsx)("img",{src:"https://maps.googleapis.com/maps/api/staticmap?center=".concat(n.address.lat,",").concat(n.address.lng,"&zoom=15&size=150x150&\n              markers=color:blue%7C").concat(n.address.lat,"-").concat(n.address.lng,"&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg"),alt:"map"})})]}),Object(q.jsx)("hr",{className:"my-4"}),Object(q.jsx)("div",{className:"p-2 border-b",children:Object(q.jsx)("h1",{className:"font-bold text-lg",children:i({id:"order-receipt"})})}),Object(q.jsxs)("div",{className:"p-2 text-sm",children:[Object(q.jsxs)("div",{className:"my-orders-items__table-desktop font-semibold text-center mb-2",children:[Object(q.jsx)("h1",{children:"#"}),Object(q.jsx)("h1",{children:i({id:"the-item"})}),Object(q.jsx)("h1",{children:i({id:"quantity"})}),Object(q.jsx)("h1",{children:i({id:"price"})}),Object(q.jsx)("h1",{children:i({id:"total"})})]}),n.items.map((function(e,t){return Object(q.jsxs)("div",{className:"my-orders-item-desktop text-base text-center",children:[Object(q.jsx)("div",{className:"",children:Object(q.jsx)("h1",{className:"",children:t+1})}),Object(q.jsx)(N.b,{to:"/".concat(r,"/products/").concat(e.product.slug,"/").concat(e.id),className:"hover:underline truncate uppercase font-semibold block",children:e.product.translation[r].title}),Object(q.jsx)("div",{className:"",children:Object(q.jsx)("h1",{className:"",children:e.qty})}),Object(q.jsx)("div",{style:{fontWeight:900},children:Object(q.jsxs)("h1",{className:"",children:[e.price," "]})}),Object(q.jsx)("div",{style:{fontWeight:900},className:"text-green-700",children:Object(q.jsxs)("h1",{className:"",children:[(e.price*e.qty).toFixed(3)," ",null===d||void 0===d?void 0:d.currency.translation[r].symbol]})})]},e.id)})),Object(q.jsx)("hr",{className:"my-3"}),Object(q.jsxs)("div",{className:"my-orders-receipt-summary font-bold",children:[Object(q.jsx)("h1",{children:i({id:"cart-total"})}),Object(q.jsxs)("h1",{className:"text-center",children:[n.subtotal," ",Object(q.jsx)("span",{className:"mx-1",children:null===d||void 0===d?void 0:d.currency.translation[r].symbol})]}),Object(q.jsx)("h1",{children:i({id:"cart-delivery-cost"})}),Object(q.jsxs)("h1",{className:"text-center",children:["0"===n.shipping_cost?i({id:"cart-free"}):n.shipping_cost," ",Object(q.jsx)("span",{className:"mx-1",children:null===d||void 0===d?void 0:d.currency.translation[r].symbol})]}),"0.000"!==n.coupon_cost&&Object(q.jsx)("h1",{className:"mb-2 text-green-700",children:i({id:"coupon-sale"})}),"0.000"!==n.coupon_cost&&Object(q.jsxs)("h1",{className:"mb-2 text-center text-green-700",children:[n.coupon_cost,Object(q.jsx)("span",{className:"mx-1",children:null===d||void 0===d?void 0:d.currency.translation[r].symbol})]}),Object(q.jsx)("h1",{className:"text-green-700 text-lg font-bold",style:{fontWeight:900},children:i({id:"subtotal"})}),Object(q.jsxs)("h1",{className:"text-green-700 text-lg font-bold text-center",style:{fontWeight:900},children:[n.total," ",null===d||void 0===d?void 0:d.currency.translation[r].symbol]})]})]})]})]})}function T(e){var t=e.orders,s=Object(b.a)().formatMessage,c=o.a.useState(!1),a=Object(l.a)(c,2),r=a[0],i=a[1],d=o.a.useState(null),n=Object(l.a)(d,2),m=n[0],j=n[1],x=function(e){switch(e){case"completed":return Object(q.jsxs)("div",{className:" text-body-text-dark flex items-center rounded  px-3 py-2  font-semibold bg-green-700  ",children:[Object(q.jsx)("h1",{children:s({id:"order-status"})}),":",Object(q.jsx)("h1",{className:"mx-1",children:s({id:"order-completed"})})]});case"canceled":return Object(q.jsxs)("div",{className:" text-body-text-dark flex items-center rounded px-3 py-2 font-semibold bg-main-color  ",children:[Object(q.jsx)("h1",{children:s({id:"order-status"})}),":",Object(q.jsx)("h1",{className:"mx-1",children:s({id:"order-cancelled"})})]});case"pending":return Object(q.jsxs)("div",{className:" text-body-text-dark  flex items-center rounded  px-3 py-2  font-semibold bg-yellow-600  ",children:[Object(q.jsx)("h1",{children:s({id:"order-status"})}),":",Object(q.jsx)("h1",{className:"mx-1",children:s({id:"order-pending"})})]});case"delivery":return Object(q.jsxs)("div",{className:" text-body-text-dark  flex items-center rounded  px-3 py-2 font-semibold bg-blue-600  ",children:[Object(q.jsx)("h1",{children:s({id:"order-status"})}),":",Object(q.jsx)("h1",{className:"mx-1",children:s({id:"order-delivery"})})]});case"waiting_for_payment":return Object(q.jsxs)("div",{className:" text-body-text-dark flex items-center  rounded px-3 py-2 font-semibold bg-yellow-600  ",children:[Object(q.jsx)("h1",{children:s({id:"order-status"})}),":",Object(q.jsx)("h1",{className:"mx-1",children:s({id:"order-waiting-for-payment"})})]});case"confirmed":return Object(q.jsxs)("div",{className:" text-body-text-dark flex items-center rounded px-3 py-2  font-semibold bg-blue-600  ",children:[Object(q.jsx)("h1",{children:s({id:"order-status"})}),":",Object(q.jsx)("h1",{className:"mx-1",children:s({id:"order-confirmed"})})]});case"new":return Object(q.jsxs)("div",{className:"text-body-text-dark px-3 py-2 rounded  font-semibold flex items-center  bg-blue-600  ",children:[Object(q.jsx)("h1",{children:s({id:"order-status"})}),":",Object(q.jsx)("h1",{className:"mx-1",children:s({id:"order-new"})})]})}},h={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return 0===t.length?Object(q.jsx)("div",{className:"flex justify-center items-center",style:{height:"calc(100vh - 56px)"},children:s({id:"no-orders-placed"})}):Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(f.a.div,{variants:{hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{staggerChildren:.1,when:"beforeChildren"}}},initial:"hidden",animate:"visible",exit:"exit",className:"",style:{minHeight:"calc(-56px + 100vh)"},children:Object(q.jsx)("div",{className:"p-3 my-orders-items__grid-mobile",children:t.map((function(e){return Object(q.jsxs)(f.a.div,{layout:!0,onClick:function(){j(e.id),i(!0)},variants:h,className:"mb-3 cursor-pointer w-full rounded-lg ".concat(m===e.id?"bg-gray-800":"bg-gray-900","  hover:bg-gray-800 transition duration-200 text-main-text"),children:[x(e.status),Object(q.jsxs)("div",{className:"p-3",children:[Object(q.jsxs)("div",{className:"flex items-center font-bold",children:[Object(q.jsx)("h1",{children:s({id:"order-number"})}),Object(q.jsx)("h1",{className:"mx-1",children:e.id})]}),Object(q.jsxs)("div",{className:"flex items-center font-bold",children:[Object(q.jsx)("h1",{children:s({id:"order-date"})}),Object(q.jsx)("h1",{className:"mx-1",children:z()(e.created_at).format("DD/MM/YYYY - HH:MM")})]}),Object(q.jsxs)("div",{className:"flex items-center text-sm",children:[Object(q.jsxs)("h1",{className:"text-gray-600",children:["completed"===e.status?s({id:"delivery-status"}):s({id:"expected-delivery"})," ",":"]}),Object(q.jsx)("h1",{className:"mx-1",children:"completed"===e.status?s({id:"delivered"}):"Soon"})]}),Object(q.jsxs)("div",{className:"text-sm",children:[Object(q.jsxs)("h1",{className:"text-gray-600",children:[s({id:"payment-method"})," :"]}),(t=e.payment_method,"knet"===t?Object(q.jsxs)("div",{className:"  flex  items-center justify-start  p-2 font-semibold",children:[Object(q.jsx)("img",{src:w.a,alt:t}),Object(q.jsx)("div",{className:"flex-1 mx-3 text-left",children:"K-net"})]}):"credit"===t?Object(q.jsxs)("div",{className:"  flex  items-center justify-start  p-2 font-semibold",children:[Object(q.jsx)("img",{src:k.a,alt:t}),Object(q.jsx)("div",{className:"flex-1 mx-3 text-left",children:"Credit Card"})]}):"amex"===t?Object(q.jsxs)("div",{className:" flex  items-center justify-start  p-2 font-semibold",children:[Object(q.jsx)("img",{src:_.a,alt:t}),Object(q.jsx)("div",{className:"flex-1 mx-3 text-left",children:"American Express"})]}):"cod"===t?Object(q.jsxs)("div",{className:"  flex  items-center justify-start  p-2 font-semibold",children:[Object(q.jsx)("img",{src:C.a,alt:t}),Object(q.jsx)("div",{className:"flex-1 mx-3 text-left",children:s({id:"cash-on-delivery"})})]}):void 0)]}),Object(q.jsx)("button",{onClick:function(){j(e.id),i(!0)},className:"px-3 py-1 text-body-text-dark bg-blue-700 uppercase  rounded font-semibold",children:s({id:"order-details"})})]})]},e.id);var t}))})}),Object(q.jsx)(p.a,{children:r&&Object(q.jsx)(F,{id:m,handleOrderDetailsClose:function(){j(null),i(!1)},isOpen:r})})]})}var W=[{value:"+965",label:"+965"},{value:"+966",label:"+966"}];function Y(){var e=o.a.useContext(m.a).settings,t=o.a.useState(W[0]),s=Object(l.a)(t,2),c=s[0],a=s[1],r=Object(b.a)(),n=r.formatMessage,h=r.locale,O=o.a.useState(!1),w=Object(l.a)(O,2),k=w[0],C=w[1],_=o.a.useState(""),S=Object(l.a)(_,2),z=S[0],M=S[1],D=o.a.useState(!1),F=Object(l.a)(D,2),Y=F[0],A=F[1],E=o.a.useState([]),V=Object(l.a)(E,2),B=V[0],I=V[1],J=j.a({phoneNumber:j.c().matches(/^\d+$/,n({id:"number-only"})).required(n({id:"phone-empty"}))});return Object(q.jsxs)(v.a,{children:[Object(q.jsx)(p.a,{children:!Y&&Object(q.jsxs)(f.a.div,{initial:!1,exit:{opacity:0},className:" text-gray-900 p-1 relative flex items-center justify-center",style:{height:"calc(100vh - 56px)"},children:[k&&Object(q.jsx)(g.a,{message:z,closeFunction:function(){C(!1)}}),Object(q.jsxs)(f.a.div,{className:" z-2  overflow-hidden",children:[Object(q.jsxs)("div",{className:"flex items-center flex-col mb-4  rounded-lg text-center ",children:[Object(q.jsx)(N.b,{to:"/".concat(h,"/"),children:Object(q.jsx)("img",{src:null===e||void 0===e?void 0:e.store_logo_color,alt:"",className:" mb-3",style:{width:"100px",height:"50px"}})}),Object(q.jsx)("h2",{className:"text-xl mb-2 text-center font-bold",children:n({id:"track-my-order"})}),Object(q.jsx)("h1",{className:"font-semibold",children:n({id:"track-order-enter-your-phone"})})]}),Object(q.jsx)("div",{className:"rounded-lg border bg-gray-100 mb-2",children:Object(q.jsx)(x.a,{initialValues:{phoneNumber:""},validationSchema:J,onSubmit:function(){var e=Object(d.a)(i.a.mark((function e(t,s){var a,r,d,l,o,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!1),e.prev=1,e.next=4,Object(y.Q)({phoneNumber:"".concat(c.value).concat(t.phoneNumber)});case 4:a=e.sent,I(a.orders),A(!0),s.setSubmitting(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),"user not exists"===(null===(r=e.t0.response)||void 0===r||null===(d=r.data)||void 0===d?void 0:d.message)?(C(!0),M(n({id:"track-order-no-orders"}))):"The selected mobile is invalid."===(null===(l=e.t0.response)||void 0===l||null===(o=l.data)||void 0===o||null===(b=o.message)||void 0===b?void 0:b.mobile[0])?s.setErrors({phoneNumber:n({id:"invalid-phone"})}):(C(!0),M(n({id:"something-went-wrong-snackbar"})));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,s){return e.apply(this,arguments)}}(),children:function(e){var t=e.handleSubmit,s=e.values,r=e.isSubmitting;return Object(q.jsxs)("form",{className:"px-3 py-2",onSubmit:t,children:[Object(q.jsx)(H,{label:n({id:"phone-label"}),name:"phoneNumber",value:s.phoneNumber,countryCode:c,setCountryCode:a}),Object(q.jsx)("div",{className:" py-1 mt-2",children:Object(q.jsxs)("button",{disabled:r,type:"submit",className:"".concat(r?"bg-main-color cursor-not-allowed":"bg-main-color text-main-text hover:bg-main-color"," w-full rounded uppercase flex items-center justify-center  p-2 font-semibold  transition duration-150 "),children:[Object(q.jsx)(u.a,{type:"ThreeDots",color:"#fff",height:24,width:24,visible:r}),!r&&n({id:"btn-track"})]})})]})}})})]})]})}),Object(q.jsx)(p.a,{children:Y&&Object(q.jsx)(T,{orders:B})})]})}var H=function(e){var t=e.label,s=(e.value,e.name),r=e.countryCode,i=e.setCountryCode,d=Object(a.a)(e,["label","value","name","countryCode","setCountryCode"]),n=Object(x.b)(s),o=Object(l.a)(n,2),b=o[0],m=o[1];return Object(q.jsxs)("div",{className:"w-full mb-2 flex flex-col ",children:[Object(q.jsx)("label",{htmlFor:s,className:"text-sm font-semibold text-gray-800 mb-1",children:t}),Object(q.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"0.5fr 1fr",gap:"0.5rem"},children:[Object(q.jsx)(O.a,{options:W,isSearchable:!1,value:r,onChange:i,styles:{dropdownIndicator:function(e){return Object(c.a)(Object(c.a)({},e),{},{padding:"0.25rem"})},valueContainer:function(e){return Object(c.a)(Object(c.a)({},e),{},{padding:"0.5rem"})}}}),Object(q.jsx)("input",Object(c.a)(Object(c.a)(Object(c.a)({},b),d),{},{onBlur:function(e){b.onBlur(e)},className:" border rounded w-full p-2 ".concat(m.error&&"border-main-color")}))]}),m.touched&&m.error?Object(q.jsx)("h1",{className:"text-xs text-main-color mt-1",children:m.error}):Object(q.jsx)("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"},children:" "})]})}}}]);
//# sourceMappingURL=33.4d7762fa.chunk.js.map