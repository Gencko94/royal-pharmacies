(this["webpackJsonproyal-pharmacy"]=this["webpackJsonproyal-pharmacy"]||[]).push([[29],{495:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return q}));var n=a(4),s=a.n(n),r=a(9),c=a(6),l=a(5),o=a(45),i=a(37),d=a(2),b=a.n(d),u=a(21),m=a(78),j=a(447),x=a(40),h=a(8),p=a(17),O=a.n(p),f=(a(38),a(69)),g=a(25),v=a(55),w=a(71),y=a(56),N=a(10),C=a(19),S=a(145),k=a(114),_=a(1),P=[{value:"+965",label:"+965"},{value:"+966",label:"+966"}],B=function(e){var t=e.label,a=(e.value,e.name),n=e.countryCode,s=e.setCountryCode,r=Object(o.a)(e,["label","value","name","countryCode","setCountryCode"]),d=Object(i.b)(a),b=Object(l.a)(d,2),u=b[0],m=b[1];return Object(_.jsxs)("div",{className:"w-full mb-2 flex flex-col ",children:[Object(_.jsx)("label",{htmlFor:a,className:"text-sm font-semibold text-gray-800 mb-1",children:t}),Object(_.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"0.5fr 1fr",gap:"0.5rem"},children:[Object(_.jsx)(f.a,{options:P,isSearchable:!1,value:n,onChange:s,styles:{dropdownIndicator:function(e){return Object(c.a)(Object(c.a)({},e),{},{padding:"0.25rem"})},valueContainer:function(e){return Object(c.a)(Object(c.a)({},e),{},{padding:"0.5rem"})}}}),Object(_.jsx)("input",Object(c.a)(Object(c.a)(Object(c.a)({},u),r),{},{onBlur:function(e){u.onBlur(e)},className:" border rounded w-full p-2 ".concat(m.error&&"border-main-color")}))]}),m.touched&&m.error?Object(_.jsx)("h1",{className:"text-xs text-main-color mt-1",children:m.error}):Object(_.jsx)("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"},children:" "})]})};function q(){var e=b.a.useContext(N.a).settings,t=b.a.useState(P[0]),a=Object(l.a)(t,2),n=a[0],c=a[1],o=Object(y.useMediaQuery)({query:"(min-width: 768px)"}),d=Object(m.a)(),p=d.formatMessage,f=d.locale,q=b.a.useState(!1),J=Object(l.a)(q,2),M=J[0],T=J[1],z=b.a.useState(!1),D=Object(l.a)(z,2),E=D[0],I=D[1],Q=b.a.useState(""),V=Object(l.a)(Q,2),$=V[0],A=V[1],G=Object(x.g)(),H=Object(x.i)().token,K=g.a({newPassword:g.c().required(p({id:"password-empty"})).min(6,p({id:"password-min-6"})).max(15,p({id:"password-max-15"})),phoneNumber:g.c().matches(/^\d+$/,p({id:"number-only"})).required(p({id:"phone-empty"}))});return Object(_.jsxs)("div",{className:" text-gray-900 px-2 flex justify-center items-center    h-screen relative",children:[M&&Object(_.jsx)(v.a,{message:$,closeFunction:function(){T(!1)}}),Object(_.jsxs)("div",{className:" relative z-2  max-w-screen-sm ",children:[Object(_.jsxs)("div",{className:"flex items-center flex-col mb-4  rounded-lg text-center ",children:[Object(_.jsx)(h.b,{to:"/",children:Object(_.jsx)("img",{src:null===e||void 0===e?void 0:e.store_logo,alt:"logo",className:" mb-3",style:{width:"100px",height:"50px"}})}),Object(_.jsx)("h2",{className:"text-xl mb-2 text-center font-semibold",children:p({id:"set-up-new-password"})}),Object(_.jsx)("h1",{children:p({id:"password-reset-enter-new-password"})})]}),Object(_.jsx)("div",{className:"rounded-lg border bg-gray-100 mb-2",children:Object(_.jsx)(i.a,{initialValues:{phoneNumber:"",newPassword:""},validationSchema:K,onSubmit:function(){var e=Object(r.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!1),e.prev=1,e.next=4,Object(C.P)({phoneNumber:"".concat(n.value).concat(t.phoneNumber),token:H,newPassword:t.newPassword});case 4:"your password has been successfully changed"===e.sent.message?I(!0):a.setSubmitting(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),"Cannot find a user with this mobile"===e.t0.response.data.message?a.setErrors({phoneNumber:p({id:"invalid-phone"})}):(T(!0),A("Something went wrong, Please try again"));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}(),children:function(e){var t=e.handleSubmit,a=e.values,s=e.isSubmitting;return Object(_.jsxs)("form",{className:"px-3 py-2",onSubmit:t,children:[Object(_.jsx)(B,{label:p({id:"phone-label"}),name:"phoneNumber",value:a.phoneNumber,countryCode:n,setCountryCode:c}),Object(_.jsx)(F,{label:p({id:"new-password-label"}),name:"newPassword",value:a.password,type:"password"}),Object(_.jsx)("div",{className:" py-1 mt-2",children:Object(_.jsxs)("button",{disabled:s,type:"submit",className:"".concat(s?"bg-main-color cursor-not-allowed":"bg-main-color text-second-nav-text-light hover:bg-red-800"," w-full rounded uppercase  flex items-center justify-center p-2 font-semibold  transition duration-150 "),children:[Object(_.jsx)(O.a,{type:"ThreeDots",color:"#fff",height:25,width:25,visible:s}),!s&&p({id:"submit"})]})})]})}})}),Object(_.jsx)(S.a,{children:E&&Object(_.jsx)(k.a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"px-3 py-2  mx-auto top-100 text-center w-full  text-sm absolute text-main-text rounded font-semibold bg-green-700",children:Object(_.jsx)("p",{children:Object(_.jsx)(j.a,{id:"password-reset-success",values:{link:function(e){return Object(_.jsx)(h.b,{to:"/".concat(f,"/app/login"),className:"text-green-700 hover:underline",children:e})}}})})})})]}),Object(_.jsx)("div",{className:"".concat(o?"credentials-language__container":"credentials-language__container-mobile"),children:Object(_.jsx)(w.a,{})}),Object(_.jsx)("div",{className:"".concat(o?"credentials-back-button__container":"credentials-back-button__container-mobile"),children:Object(_.jsx)("button",{onClick:function(){return G.goBack()},children:Object(_.jsx)(u.f,{className:"w-6 h-6"})})})]})}var F=function(e){var t=e.label,a=(e.value,e.name),n=Object(o.a)(e,["label","value","name"]),s=Object(i.b)(a),r=Object(l.a)(s,2),d=r[0],b=r[1];return Object(_.jsxs)("div",{className:"w-full relative mb-2 flex flex-col",children:[Object(_.jsx)("label",{htmlFor:a,className:" text-sm font-semibold text-gray-800 mb-1 ",children:t}),Object(_.jsx)("input",Object(c.a)(Object(c.a)(Object(c.a)({},d),n),{},{onBlur:function(e){d.onBlur(e)},className:"".concat(b.error&&b.touched&&"border-main-color"," w-full rounded-lg border  p-2")})),b.touched&&b.error?Object(_.jsx)("h1",{className:"text-xs text-main-color mt-1",children:b.error}):Object(_.jsx)("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"},children:" "})]})}}}]);
//# sourceMappingURL=29.5eb8b078.chunk.js.map