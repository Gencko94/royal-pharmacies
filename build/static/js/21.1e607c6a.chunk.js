(this["webpackJsonproyal-pharmacy"]=this["webpackJsonproyal-pharmacy"]||[]).push([[21],{463:function(e,t,a){"use strict";a.d(t,"a",(function(){return L}));var s=a(6),c=a(2),n=a.n(c),l=a(12),r=a.n(l),i=a(17),d=a.n(i),o=(a(37),a(206)),b=a(134),j=a(207),m=a(50),u=a(45),x=a(4),h=a.n(x),O=a(5),p=a(9),f=a(38),v=a(78),y=a(25),g=a(69),N=a(18),k=a(56),w=a(144),C=a(1),S=[{value:"+965",label:"+965"},{value:"+966",label:"+966"}];function _(e){var t=e.markerAddress,a=e.setShowMap,c=e.marker,l=e.setMarker,r=e.outOfBorder,i=n.a.useState(S[0]),o=Object(s.a)(i,2),b=o[0],j=o[1],m=n.a.useContext(N.a).addAddressMutation,u=n.a.useState(""),x=Object(s.a)(u,2),g=x[0],_=x[1],q=n.a.useState(!1),z=Object(s.a)(q,2),D=z[0],L=z[1],B=Object(v.a)().formatMessage,H=n.a.useState(!1),I=Object(s.a)(H,2),U=I[0],V=I[1],F=y.a({apartmentOrHouseNumber:y.c().required(B({id:"required-field"})),buildingOrTowerNumber:y.c().required(B({id:"required-field"})),addressName:y.c().required(B({id:"required-field"})),phoneNumber:y.c().matches(/^\d+$/,B({id:"number-only"})).min(8,B({id:"invalid-phone"})).required(B({id:"required-field"})),additionalDetails:y.c()});return Object(C.jsxs)("div",{children:[Object(C.jsx)(w.a,{children:D&&Object(C.jsx)(k.a,{message:B({id:"something-went-wrong-snackbar"}),closeFunction:function(){L(!1)}})}),Object(C.jsx)("div",{className:"font-bold p-2",children:Object(C.jsx)("h1",{children:B({id:"location-details"})})}),Object(C.jsxs)("div",{className:"p-2",children:[Object(C.jsxs)("div",{className:"flex items-center justify-between",children:[Object(C.jsx)("label",{htmlFor:"location",className:"text-sm font-bold text-gray-700",children:B({id:"delivery-location"})}),Object(C.jsx)("button",{onClick:function(){l(null),_("")},className:"text-main-color text-sm hover:underline",children:B({id:"clear"})})]}),Object(C.jsx)("textarea",{rows:"3",id:"location",className:" mt-1 w-full rounded border  p-1  ",type:"textarea",value:t||g,readOnly:t,onChange:function(e){return _(e.target.value)}}),Object(C.jsx)(f.a,{initialValues:{apartmentOrHouseNumber:"",buildingOrTowerNumber:"",phoneNumber:"",additionalDetails:"",addressName:""},validationSchema:F,onSubmit:function(){var e=Object(p.a)(h.a.mark((function e(s){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m({lat:null===c||void 0===c?void 0:c.lat,lng:null===c||void 0===c?void 0:c.lng,defaultLocation:U,addressDetails:Object(O.a)(Object(O.a)({phoneNumber:"".concat(b.value).concat(s.phoneNumber)},s),{},{markerAddress:t,userTyped_address:g})});case 3:a(!1),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),L(!0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var a=e.handleSubmit,s=e.values,c=e.isSubmitting;return Object(C.jsxs)("form",{onSubmit:a,children:[Object(C.jsx)(T,{label:B({id:"maps-detailed-address-phone"}),name:"phoneNumber",value:s.phoneNumber,type:"text",countryCode:b,setCountryCode:j}),Object(C.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[Object(C.jsx)(A,{label:B({id:"maps-detailed-address-apartment"}),name:"apartmentOrHouseNumber",value:s.apartmentOrHouseNumber,type:"text"}),Object(C.jsx)(A,{label:B({id:"maps-detailed-address-building"}),name:"buildingOrTowerNumber",value:s.buildingOrTowerNumber,type:"text"})]}),Object(C.jsx)(A,{label:B({id:"maps-detailed-address-name"}),name:"addressName",value:s.addressName,type:"text"}),Object(C.jsx)(M,{label:B({id:"maps-details-extra-details"}),name:"additionalDetails",value:s.additionalDetails}),Object(C.jsxs)("div",{className:" ",children:[Object(C.jsxs)("div",{className:"flex items-center mb-2",children:[Object(C.jsx)("label",{children:B({id:"mark-as-default"})}),Object(C.jsx)("input",{className:" mx-2",type:"checkbox",checked:U,onChange:function(){return V(!U)}})]}),Object(C.jsx)("button",{type:"submit",disabled:!t&&!g||r,className:"  ".concat(!t&&!g||r?"bg-gray-500 text-gray-300":"bg-main-color text-main-text"," p-2 rounded  w-full  flex items-center uppercase justify-center font-semibold"),children:c?Object(C.jsx)(d.a,{type:"ThreeDots",color:"#fff",height:23,width:23,visible:c}):Object(C.jsx)("h1",{children:B({id:"confirm-btn"})})})]})]})}})]})]})}var A=function(e){var t=e.label,a=(e.value,e.name),c=Object(u.a)(e,["label","value","name"]),n=Object(f.b)(a),l=Object(s.a)(n,2),r=l[0],i=l[1];return Object(C.jsxs)("div",{className:"w-full mb-1 relative",children:[Object(C.jsx)("label",{htmlFor:a,className:"text-sm font-bold text-gray-700 mb-1",children:t}),Object(C.jsx)("input",Object(O.a)(Object(O.a)(Object(O.a)({},r),c),{},{onBlur:function(e){r.onBlur(e)},className:" w-full rounded-sm border   p-1"})),i.touched&&i.error?Object(C.jsx)("h1",{className:"text-xs text-main-color mt-1",children:i.error}):Object(C.jsx)("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"},children:" "})]})},M=function(e){var t=e.label,a=(e.value,e.name),c=Object(u.a)(e,["label","value","name"]),n=Object(f.b)(a),l=Object(s.a)(n,1)[0],r=Object(v.a)().formatMessage;return Object(C.jsxs)("div",{className:"w-full mb-1 relative",children:[Object(C.jsxs)("div",{className:"flex items-center mb-1",children:[Object(C.jsx)("label",{htmlFor:a,className:"text-sm font-bold text-gray-700",children:t}),Object(C.jsxs)("h1",{className:"text-xs italic mx-3",children:["(",r({id:"maps-details-optional"}),")"]})]}),Object(C.jsx)("textarea",Object(O.a)(Object(O.a)(Object(O.a)({rows:3},l),c),{},{onBlur:function(e){l.onBlur(e)},className:" w-full rounded-sm border   p-1"}))]})},T=function(e){var t=e.label,a=(e.value,e.name),c=e.countryCode,n=e.setCountryCode,l=Object(u.a)(e,["label","value","name","countryCode","setCountryCode"]),r=Object(f.b)(a),i=Object(s.a)(r,2),d=i[0],o=i[1];return Object(C.jsxs)("div",{className:"w-full mb-1 flex flex-col ",children:[Object(C.jsx)("label",{htmlFor:a,className:"text-sm font-bold text-gray-800 mb-1",children:t}),Object(C.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"0.4fr 1fr",gap:"0.5rem"},children:[Object(C.jsx)(g.a,{options:S,isSearchable:!1,value:c,onChange:n,styles:{dropdownIndicator:function(e){return Object(O.a)(Object(O.a)({},e),{},{padding:"0.25rem"})},valueContainer:function(e){return Object(O.a)(Object(O.a)({},e),{},{padding:"0.5rem"})}}}),Object(C.jsx)("input",Object(O.a)(Object(O.a)(Object(O.a)({},d),l),{},{onBlur:function(e){d.onBlur(e)},className:" border rounded w-full p-2 ".concat(o.error&&"border-main-color")}))]}),o.touched&&o.error?Object(C.jsx)("h1",{className:"text-xs text-main-color mt-1",children:o.error}):Object(C.jsx)("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"},children:" "})]})},q=["places"],z={lat:29.3759,lng:47.9774},D={styles:o.a,disableDefaultUI:!0,zoomControl:!0};function L(e){var t=e.setShowMap,a=Object(m.useMediaQuery)({query:"(min-width: 768px)"}),c=n.a.useState(!1),l=Object(s.a)(c,2),i=l[0],o=l[1],u=Object(v.a)(),x=u.formatMessage,h=u.locale,O=Object(b.d)({googleMapsApiKey:"AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg",libraries:q,language:h}),p=O.isLoaded,f=O.loadError,y=n.a.useState(null),g=Object(s.a)(y,2),N=g[0],k=g[1],w=n.a.useState(null),S=Object(s.a)(w,2),A=S[0],M=S[1],T=n.a.useState(null),L=Object(s.a)(T,2),B=L[0],H=L[1],I=n.a.useRef(),U=n.a.useCallback((function(e){I.current=e}),[]),V=n.a.useCallback((function(e){var t=e.lat,a=e.lng;I.current.panTo({lat:t,lng:a}),k({lat:t,lng:a}),M(null)}),[]);return n.a.useEffect((function(){N?r.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(N.lat,",").concat(N.lng,"&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg","&language=").concat(h)).then((function(e){if(0===e.data.results.length)return H(null),M(null),void o(!0);"KW"!==e.data.results[0].address_components.find((function(e){return e.types.includes("country")})).short_name||0===e.data.results.length?o(!0):!0===i&&o(!1),H("".concat(e.data.results[0].formatted_address)),M("".concat(e.data.results[0].address_components.map((function(e){return e.short_name})).join(", ")))})).catch((function(e){})):(H(null),M(null))}),[N,h]),f?Object(C.jsx)("div",{className:"flex justify-center items-center h-full",children:Object(C.jsx)("h1",{children:x({id:"error-loading-maps"})})}):p?Object(C.jsxs)("div",{className:"".concat(a?"my-addresses-desktop-maps__grid":"my-addresses-mobile-maps__grid"),children:[Object(C.jsxs)("div",{className:"relative h-full",children:[Object(C.jsx)(j.a,{panTo:V,markerAddress:B}),Object(C.jsxs)(b.a,{mapContainerStyle:{width:"100%",height:a?"100%":"300px"},zoom:15,center:z,options:D,clickableIcons:!1,onLoad:U,onClick:function(e){k({lat:e.latLng.lat(),lng:e.latLng.lng()})},children:[N&&Object(C.jsx)(b.c,{position:{lat:null===N||void 0===N?void 0:N.lat,lng:null===N||void 0===N?void 0:N.lng}}),i&&Object(C.jsx)("div",{className:"absolute mx-2 rounded p-2  bg-main-color text-main-text text-center",style:{top:"110px",left:"2%",right:"2%",width:"94%"},children:Object(C.jsx)("h1",{className:"text-sm",children:x({id:"out-of-border"})})}),A&&Object(C.jsx)(b.b,{onCloseClick:function(){return M(null)},position:{lat:null===N||void 0===N?void 0:N.lat,lng:null===N||void 0===N?void 0:N.lng},options:{pixelOffset:new window.google.maps.Size(0,-50)},children:Object(C.jsx)("div",{className:"p-2",children:Object(C.jsx)("div",{children:Object(C.jsx)("h1",{children:A})})})})]})]}),Object(C.jsx)(_,{markerAddress:B,marker:N,setShowMap:t,setMarker:k,outOfBorder:i})]}):Object(C.jsx)("div",{className:"flex justify-center items-center h-full",children:Object(C.jsx)(d.a,{type:"ThreeDots",color:"#b72b2b",height:40,width:40,visible:!p})})}},508:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return V}));var s=a(4),c=a.n(s),n=a(9),l=a(35),r=a(5),i=a(6),d=a(2),o=a.n(d),b=a(244),j=a(22),m=a(78),u=a(145),x=a(146),h=a(17),O=a.n(h),p=(a(37),a(149)),f=a(147),v=a(10),y=a(39),g=a(8),N=a(1);function k(e){var t=e.handleStepBack,a=e.selectedAddress,s=e.paymentMethod,c=e.setPaymentMethod,n=e.handleCheckout,l=e.checkoutLoading,r=Object(m.a)(),i=r.formatMessage,d=r.locale,b=o.a.useContext(v.a).deliveryCountry,h=o.a.useContext(y.a),k=h.cartItems,w=h.cartSubtotal,C=h.cartTotal,S=h.shippingCost,_=h.couponCost,A=h.coupon,M=function(e){c(e)};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:"py-2",children:[Object(N.jsxs)("div",{className:"flex flex-col justify-center font-semibold  px-2 ",children:[Object(N.jsxs)("div",{className:"",children:[Object(N.jsx)("div",{className:"p-2 border-b",children:Object(N.jsx)("h1",{className:" text-center text-2xl font-semibold",children:i({id:"order-receipt"})})}),Object(N.jsxs)("div",{className:"text-xl  my-orders-items__table-mobile font-normal border-b mb-1 py-2",children:[Object(N.jsx)("h1",{children:i({id:"the-item"})}),Object(N.jsx)("h1",{children:i({id:"qty"})}),Object(N.jsx)("h1",{children:i({id:"price"})}),Object(N.jsx)("h1",{children:i({id:"total"})})]}),null===k||void 0===k?void 0:k.map((function(e,t){return Object(N.jsxs)("div",{className:"my-orders-item-mobile  ".concat(t%2!==0?"bg-nav-cat-light":""," py-4 text-center"),children:[Object(N.jsx)(g.b,{to:"/".concat(d,"/products/").concat(e.slug,"/").concat(e.id),className:"hover:underline block text-clamp-2 text-normal  font-semibold",children:Object(N.jsx)("h1",{className:"font-semibold",children:e["name_".concat(d)]})}),Object(N.jsx)("div",{className:"",children:Object(N.jsx)("h1",{className:"",children:e.qty})}),Object(N.jsx)("div",{children:Object(N.jsx)("h1",{className:"",children:e.price})}),Object(N.jsx)("div",{style:{fontWeight:900},className:"text-green-700",children:Object(N.jsxs)("h1",{className:"",children:[e.total," ",null===b||void 0===b?void 0:b.currency.translation[d].symbol]})})]},e.id)})),Object(N.jsx)("hr",{className:"my-3"}),Object(N.jsxs)("div",{className:"my-orders-receipt-summary font-semibold py-2 text-lg",children:[Object(N.jsx)("h1",{className:"mb-2",children:i({id:"cart-total"})}),Object(N.jsxs)("h1",{className:"text-center",children:[w,Object(N.jsx)("span",{className:"mx-1",children:null===b||void 0===b?void 0:b.currency.translation[d].symbol})]}),Object(N.jsx)("h1",{children:i({id:"cart-delivery-cost"})}),Object(N.jsxs)("h1",{className:" text-center",children:["0"===S?i({id:"cart-free"}):S,Object(N.jsx)("span",{className:"mx-1",children:null===b||void 0===b?void 0:b.currency.translation[d].symbol})]}),A&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("h1",{className:"",children:i({id:"coupon-sale"})}),Object(N.jsxs)("h1",{className:"text-center text-green-700",children:[_,Object(N.jsx)("span",{className:"mx-1",children:null===b||void 0===b?void 0:b.currency.translation[d].symbol})]})]}),Object(N.jsx)("h1",{className:"text-green-700 mt-3 text-lg font-bold",children:i({id:"subtotal"})}),Object(N.jsxs)("h1",{className:"text-green-700 text-center mt-3 text-lg font-bold",children:[C," ",null===b||void 0===b?void 0:b.currency.translation[d].symbol]})]})]}),Object(N.jsx)("hr",{}),Object(N.jsxs)("div",{className:"",children:[Object(N.jsx)("div",{className:"p-2 border-b",children:Object(N.jsx)("h1",{className:"text-center text-2xl font-semibold",children:i({id:"delivery-address"})})}),Object(N.jsxs)("div",{className:"",style:{display:"grid",gridTemplateColumns:"1fr"},children:[(null===a||void 0===a?void 0:a.lat)&&Object(N.jsx)("img",{src:"https://maps.googleapis.com/maps/api/staticmap?center=".concat(a.lat,",").concat(a.lng,"&zoom=18&size=600x400&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg"),alt:"map",className:"self-start"}),Object(N.jsxs)("div",{children:[Object(N.jsxs)("div",{className:"p-2 border-b",children:[Object(N.jsxs)("h1",{className:" text-gray-700",children:[i({id:"delivery-location"})," "]}),Object(N.jsx)("h1",{children:(null===a||void 0===a?void 0:a.marked_address)||(null===a||void 0===a?void 0:a.userTyped_address)})]}),Object(N.jsxs)("div",{children:[Object(N.jsxs)("div",{className:"p-2  border-b bg-nav-cat-light",children:[Object(N.jsxs)("h1",{className:" text-gray-700",children:[i({id:"maps-detailed-address-apartment"})," "]}),Object(N.jsx)("h1",{children:null===a||void 0===a?void 0:a.apartment_house_number})]}),Object(N.jsxs)("div",{className:"p-2 border-b ",children:[Object(N.jsxs)("h1",{className:"font-semibold text-gray-700",children:[i({id:"maps-detailed-address-building"})," "]}),Object(N.jsx)("h1",{children:null===a||void 0===a?void 0:a.building_tower_number})]})]}),Object(N.jsx)("div",{className:"",children:Object(N.jsxs)("div",{className:"p-2  border-b bg-nav-cat-light",children:[Object(N.jsxs)("h1",{className:"font-semibold text-gray-700",children:[i({id:"maps-details-extra-details"})," ",":"," "]}),Object(N.jsx)("h1",{className:"",children:(null===a||void 0===a?void 0:a.addition_direction)||i({id:"none"})})]})})]})]})]})]}),Object(N.jsx)("hr",{className:"my-5"}),Object(N.jsxs)("div",{className:" mb-2 relative font-semibold  ",children:[Object(N.jsx)("div",{className:"mb-1",children:Object(N.jsx)("h1",{className:"text-center",style:{fontWeight:900},children:i({id:"select-payment-method"})})}),Object(N.jsx)("div",{className:"p-2",children:Object(N.jsx)("div",{className:"flex flex-col ",children:function(){var e=[];if(b)return b.payment.forEach((function(t){if(0===t.status)return null;"knet"===t.key&&e.push(Object(N.jsxs)("button",{onClick:function(){return M(t.key)},className:" ".concat(s===t.key&&"bg-main-color text-main-text border-main-color"," mb-2 flex border text-sm items-center justify-start rounded-lg p-2 font-semibold"),children:[Object(N.jsx)("img",{src:u.a,alt:t.key}),Object(N.jsx)("div",{className:"flex-1 mx-3 text-left",children:i({id:t.key})}),Object(N.jsx)("div",{children:s===t.key?Object(N.jsx)(j.j,{className:"w-6 h-6 text-btn-secondary-light"}):Object(N.jsx)(j.i,{className:"w-6 h-6 text-btn-primary-light"})})]},t.key)),"credit"===t.key&&e.push(Object(N.jsxs)("button",{onClick:function(){return M(t.key)},className:" ".concat(s===t.key&&"bg-main-color text-main-text border-main-color"," mb-2 flex border text-sm items-center justify-start rounded-lg p-2 font-semibold"),children:[Object(N.jsx)("img",{src:x.a,alt:t.key}),Object(N.jsx)("div",{className:"flex-1 mx-3 text-left",children:i({id:t.key})}),Object(N.jsx)("div",{children:s===t.key?Object(N.jsx)(j.j,{className:"w-6 h-6 text-btn-secondary-light"}):Object(N.jsx)(j.i,{className:"w-6 h-6 text-btn-primary-light"})})]},t.key)),"amex"===t.key&&e.push(Object(N.jsxs)("button",{onClick:function(){return M(t.key)},className:" ".concat(s===t.key&&"bg-main-color text-main-text border-main-color"," mb-2 flex border text-sm items-center justify-start rounded-lg p-2 font-semibold"),children:[Object(N.jsx)("img",{src:f.a,alt:t.key}),Object(N.jsx)("div",{className:"flex-1 mx-3 text-left",children:i({id:t.key})}),Object(N.jsx)("div",{children:s===t.key?Object(N.jsx)(j.j,{className:"w-6 h-6 text-btn-secondary-light"}):Object(N.jsx)(j.i,{className:"w-6 h-6 text-btn-primary-light"})})]},t.key)),"cod"===t.key&&e.push(Object(N.jsxs)("button",{onClick:function(){return M(t.key)},className:" ".concat(s===t.key&&"bg-main-color text-main-text border-main-color"," mb-2 flex border text-sm items-center justify-start rounded-lg p-2 font-semibold"),children:[Object(N.jsx)("img",{src:p.a,alt:t.key}),Object(N.jsx)("div",{className:"flex-1 mx-3 text-left",children:i({id:"cash-on-delivery"})}),Object(N.jsx)("div",{children:s===t.key?Object(N.jsx)(j.j,{className:"w-6 h-6 text-main-text"}):Object(N.jsx)(j.i,{className:"w-6 h-6 text-main-color"})})]},t.key))})),e}()})})]})]}),Object(N.jsxs)("div",{className:"flex justify-end items-center",children:[Object(N.jsx)("button",{className:"px-3 py-2 uppercase bg-main-color text-main-text rounded font-semibold",onClick:t,children:i({id:"btn-back-to-addresses"})}),Object(N.jsx)("button",{disabled:!s,className:"\n              ".concat(s?"bg-main-color text-main-text":"bg-gray-600 text-gray-100"," flex items-center  justify-center uppercase px-3 py-2 mx-2  rounded font-semibold"),onClick:n,children:l?Object(N.jsx)(O.a,{type:"ThreeDots",color:"#fff",height:24,width:24,visible:!0}):i({id:"btn-proceed"})})]})]})}var w=a(245),C=a(95),S=a(18),_=a(463),A=a(452),M=a(115),T=a(144),q=a(21),z=a(130),D=a.n(z);function L(e){var t=e.userAddresses,a=e.setShowMap,s=e.handleSelectAddress,c=Object(m.a)().formatMessage,n=o.a.useState(null),l=Object(i.a)(n,2),r=l[0],d=l[1],b={partial:{right:0,top:0,bottom:0,width:"20%"},full:{right:0,top:0,bottom:0,width:"100%"}};return Object(N.jsxs)("div",{className:"min-h-full",children:[Object(N.jsx)("div",{className:" p-3 flex items-center justify-between bg-main-color text-main-text",children:Object(N.jsx)("h1",{className:" font-semibold",children:c({id:"select-address-header"})})}),Object(N.jsx)(A.a,{children:Object(N.jsxs)(M.a.div,{layout:!0,className:"p-2 locations-grid__mobile",children:[t.map((function(e){return Object(N.jsx)(M.a.div,{layout:!0,className:" rounded border relative  bg-body-light",children:Object(N.jsxs)(M.a.div,{layout:!0,children:[Object(N.jsxs)("div",{style:{position:"relative"},children:[Object(N.jsx)("img",{src:"https://maps.googleapis.com/maps/api/staticmap?center=".concat(e.lat,",").concat(e.lng,"&zoom=15&size=350x250&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg"),alt:"thumbnail"}),Object(N.jsxs)(M.a.div,{variants:b,initial:"partial",animate:r===e.id?"full":"partial",layout:!0,exit:"partial",onClick:function(){return t=e.id,void d(r===t?null:t);var t},className:"absolute overflow-hidden p-2 text-main-text  transition cursor-pointer duration-150 opacity-75 bg-gray-800",children:[Object(N.jsx)(q.m,{style:{left:"10px"},className:"absolute  top-1/2 transform  -translate-y-1/2  w-5 h-5"}),Object(N.jsx)(T.a,{children:r===e.id&&Object(N.jsxs)(M.a.div,{initial:{opacity:0},animate:{opacity:1,marginLeft:"35px"},exit:{opacity:0},layout:!0,className:"text-xs",children:[Object(N.jsxs)("div",{children:[Object(N.jsxs)("h1",{children:[c({id:"maps-detailed-address-apartment-short"}),":"]}),Object(N.jsx)("h1",{children:e.apartment_house_number})]}),Object(N.jsxs)("div",{children:[Object(N.jsxs)("h1",{children:[c({id:"maps-detailed-address-building-short"}),":"]}),Object(N.jsx)("h1",{children:e.building_tower_number})]}),Object(N.jsxs)("div",{children:[Object(N.jsxs)("h1",{children:[c({id:"maps-detailed-address-phone-short"}),":"]}),Object(N.jsx)("h1",{children:e.phone_number})]})]})})]})]}),Object(N.jsxs)("div",{className:"p-1",children:[Object(N.jsx)("div",{className:"text-sm text-gray-600 font-semibold",children:Object(N.jsx)("h1",{children:e.address_name})}),Object(N.jsxs)("div",{className:"mb-2 font-semibold",style:{height:"50px"},children:[Object(N.jsx)("h1",{children:e.marked_address||e.userTyped_addres}),Object(N.jsx)("h1",{children:e.addition_direction})]}),Object(N.jsx)("button",{onClick:function(){return s(e)},className:"w-full  p-2 rounded uppercase \n                          bg-main-color\n                      } text-main-text",children:c({id:"select-btn"})})]})]})},e.id)})),Object(N.jsx)("div",{className:"p-3 flex items-center justify-center ",children:Object(N.jsxs)("button",{onClick:function(){return a(!0)},className:"p-3 flex items-center justify-center place-self-center justify-self-center bg-main-color hover:bg-red-900 transition duration-150 relative rounded-lg text-main-text",children:[Object(N.jsx)(D.a,{background:!0}),Object(N.jsx)(q.q,{className:"h-8 w-8"})]})})]})})]})}function B(e){var t=e.handleSelectAddress,a=o.a.useState(!1),s=Object(i.a)(a,2),c=s[0],n=s[1],l=o.a.useContext(S.a),r=l.userAddresses;return l.userAddressesLoading?Object(N.jsx)("div",{className:"flex h-full justify-center items-center",style:{minHeight:"calc(100vh - 102px)"},children:Object(N.jsx)(O.a,{type:"ThreeDots",color:"#b72b2b",height:40,width:40,visible:!0})}):Object(N.jsxs)("div",{className:"h-full",children:[0!==r.length&&!c&&Object(N.jsx)(L,{userAddresses:r,setShowMap:n,handleSelectAddress:t}),(0===r.length||c)&&Object(N.jsx)("div",{className:" border mb-2 h-full",children:Object(N.jsx)(_.a,{setShowMap:n})})]})}var H=a(19),I=a(55),U=a(56);function V(){var e=o.a.useContext(v.a).deliveryCountry,t=o.a.useState(0),a=Object(i.a)(t,2),s=a[0],d=a[1],j=o.a.useState(null),u=Object(i.a)(j,2),x=u[0],h=u[1],p=o.a.useState(null),f=Object(i.a)(p,2),g=f[0],S=f[1],_=o.a.useState(!1),A=Object(i.a)(_,2),M=A[0],T=A[1],q=o.a.useState(""),z=Object(i.a)(q,2),D=z[0],L=z[1],V=o.a.useContext(y.a),F=V.cartItems,E=V.cartItemsLoading,Q=V.coupon,W=o.a.useContext(v.a).authenticationLoading,X=Object(m.a)().formatMessage,Y=Object(I.a)(H.i,{throwOnError:!0}),K=Y.mutateAsync,J=Y.isLoading,P=o.a.useState({0:!1,1:!1,2:!1}),R=Object(i.a)(P,2),$=R[0],G=R[1],Z=function(){var t=Object(n.a)(c.a.mark((function t(){var a,s,n,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={address:x.id,payment_method:g,order_type:"Kuwait"===(null===e||void 0===e?void 0:e.translation.en.name)?"local":"international"},t.prev=1,t.next=4,K({deliveryCountry:e,order:a,coupon:Q});case 4:s=t.sent,G(Object(r.a)(Object(r.a)({},$),{},{1:!0})),"cod"===g?d(2):window.location.href=s.payment,t.next=15;break;case 9:if(t.prev=9,t.t0=t.catch(1),T(!0),"Coupon already used by this customer."!==(null===(n=t.t0.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)){t.next=14;break}return t.abrupt("return",L(X({id:"coupon-limit-reached"})));case 14:L(X({id:"something-went-wrong-snackbar"}));case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();return o.a.useEffect((function(){window.scrollTo(0,0)}),[s]),E||W?Object(N.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:Object(N.jsx)(O.a,{type:"ThreeDots",color:"#b72b2b",height:50,width:50,visible:!0})}):E||0!==F.length?Object(N.jsxs)(C.a,{children:[M&&Object(N.jsx)(U.a,{message:D,closeFunction:function(){T(!1)}}),Object(N.jsxs)("div",{className:"xxl:max-w-default md:max-w-screen-xl mx-auto",children:[Object(N.jsx)(w.a,{selectedStep:s,stepDone:$}),Object(N.jsxs)("div",{className:"mb-3",style:{minHeight:"calc(100vh - 231px)"},children:[0===s&&Object(N.jsx)(B,{handleSelectAddress:function(e){h(e),d(s+1),G(Object(r.a)(Object(r.a)({},$),{},Object(l.a)({},s,!0)))}}),1===s&&Object(N.jsx)(k,{handleStepBack:function(){0!==s&&(d(s-1),G(Object(r.a)(Object(r.a)({},$),{},Object(l.a)({},s-1,!1))))},selectedAddress:x,paymentMethod:g,setPaymentMethod:S,handleCheckout:Z,checkoutLoading:J}),2===s&&Object(N.jsx)(b.a,{})]})]})]}):Object(N.jsx)(C.a,{children:Object(N.jsx)("div",{className:"flex items-center justify-center mx-auto text-center",style:{height:"calc(100vh - 110px)",maxWidth:"360px"},children:Object(N.jsx)("h1",{className:"text-lg font-semibold",children:X({id:"checkout-cart-empty"})})})})}}}]);
//# sourceMappingURL=21.1e607c6a.chunk.js.map