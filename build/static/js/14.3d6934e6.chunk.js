(this["webpackJsonproyal-pharmacy"]=this["webpackJsonproyal-pharmacy"]||[]).push([[14],{456:function(e,t,n){"use strict";t.a=n.p+"static/media/cartEmpty.4e6c2887.png"},457:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var c=n(2),a=n.n(c),r=n(78),s=n(8),i=n(29),l=n(456),o=n(115),d=n(144),u=n(39),j=n(10),h=n(4),x=n.n(h),b=n(9),m=n(6),f=n(18),p=n(17),v=n.n(p),y=(n(37),n(62)),g=n(1);function O(e){var t=e.item,n=e.setSideMenuOpen,c=a.a.useContext(u.a),i=c.removeFromCartMutation,l=c.removeFromGuestCartMutation,d=c.coupon,h=a.a.useContext(j.a).deliveryCountry,p=Object(r.a)(),O=p.formatMessage,N=p.locale,C=a.a.useState(!1),w=Object(m.a)(C,2),P=w[0],S=w[1],k=a.a.useContext(f.a).userId,F=function(){var e=Object(b.a)(x.a.mark((function e(){var n,c,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S(!0),e.prev=1,!k){e.next=10;break}return n=t.id,c=t.cart_id,e.next=7,i({id:n,cart_id:c,userId:k,deliveryCountry:h,coupon:d});case 7:S(!1),e.next=14;break;case 10:return a=t.options.sku,e.next=13,l({sku:a,deliveryCountry:h,coupon:d});case 13:S(!1);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),S(!1);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}(),M={hidden:{x:"".concat("ar"===N?"-100%":"100%")},visible:{x:"0",delay:3},exited:{opacity:0}};return Object(g.jsxs)(o.a.div,{initial:"hidden",animate:"visible",exit:"exited",variants:M,className:" side-cart-menu__item mb-2 ",children:[Object(g.jsx)("div",{className:"",children:Object(g.jsx)(s.b,{title:"".concat(t["name_".concat(N)]),to:"/".concat(N,"/products/").concat(t.slug,"/").concat(t.id),onClick:function(){return n(!1)},children:Object(g.jsx)(y.a,{src:t.image,origin:"original",alt:t["name_".concat(N)],pb:"calc(100% * 210/210)"})})}),Object(g.jsxs)("div",{className:"",children:[Object(g.jsx)(s.b,{title:"".concat(t["name_".concat(N)]),className:"hover:underline",to:"/".concat(N,"/products/").concat(t.slug,"/").concat(t.id),onClick:function(){return n(!1)},children:Object(g.jsx)("h1",{className:"font-semibold text-clamp-2 text-sm uppercase ",children:"".concat(t["name_".concat(N)]).concat(t.options.addons?" - ".concat(Object.keys(t.options.addons).map((function(e){return t.options.addons[e]})).join(" - ")):"")})}),Object(g.jsxs)("div",{className:"flex items-center text-gray-700",children:[Object(g.jsxs)("div",{className:"flex items-center",children:[Object(g.jsx)("h1",{className:"text-xs font-semibold",children:O({id:"price"})}),Object(g.jsxs)("h1",{className:"text-xs font-bold mx-1",children:[t.total," ",null===h||void 0===h?void 0:h.currency.translation[N].symbol]})]}),Object(g.jsxs)("div",{className:"flex items-center text-xs mx-2",children:[Object(g.jsxs)("h1",{className:"font-semibold",children:[O({id:"qty"})," :"]}),Object(g.jsx)("h1",{className:"mx-1 font-bold",children:t.qty})]})]}),Object(g.jsx)("div",{children:Object(g.jsx)("button",{className:"\n                bg-main-color text-main-text\n            text-xs rounded p-1 my-1 flex uppercase items-center font-semibold justify-center ",style:{width:"140px"},onClick:F,children:P?Object(g.jsx)(v.a,{type:"ThreeDots",color:"#fff",height:18,width:18,visible:!0}):O({id:"remove-from-cart"})})})]})]})}function N(e){var t=e.setSideMenuOpen,n=a.a.useContext(u.a),c=n.sideCartItems,h=n.sideCartSubTotal,x=n.sideCartCouponCost,b=a.a.useContext(j.a).deliveryCountry,m=Object(r.a)(),f=m.formatMessage,p=m.locale,v={hidden:{x:"".concat("ar"===p?"-100%":"100%"),opacity:0},visible:{x:"0%",opacity:1,transition:{type:"tween"}},exited:{x:"".concat("ar"===p?"-100%":"100%"),transition:{when:"afterChildren"}}};return Object(g.jsx)(o.a.div,{variants:v,initial:"hidden",animate:"visible",exit:"exited",className:"side-add-to-cart__container ".concat("ar"===p?"left-0":"right-0"),children:Object(g.jsxs)("div",{className:" bg-body-light p-2 h-full flex flex-col ",children:[Object(g.jsxs)("div",{className:"flex items-center justify-between",children:[Object(g.jsx)("h1",{className:"font-semibold",children:f({id:"shopping-cart"})}),Object(g.jsx)("button",{onClick:function(){return t(!1)},children:Object(g.jsx)(i.b,{className:"w-5 h-5 "})})]}),Object(g.jsx)("hr",{className:"my-2"}),0===(null===c||void 0===c?void 0:c.length)&&Object(g.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[Object(g.jsx)("img",{src:l.a,alt:"Empty cart"}),Object(g.jsx)("h1",{className:"font-bold mb-2",children:f({id:"cart-empty"})}),Object(g.jsx)(s.b,{to:"/".concat(p),className:"text-sm text-blue-600 hover:underline",children:f({id:"check-today-deals"})})]}),c.length>0&&Object(g.jsx)("div",{className:" flex-1 overflow-y-auto overflow-x-hidden",children:Object(g.jsx)(d.a,{children:c.map((function(e){return Object(g.jsx)(O,{item:e,setSideMenuOpen:t},e.options.sku)}))})}),Object(g.jsx)("hr",{className:"my-1"}),c.length>0&&Object(g.jsxs)("div",{children:["0.000"!==x&&Object(g.jsxs)("div",{className:"flex text-green-700 justify-between semibold items-center  my-2",children:[Object(g.jsx)("h1",{className:"font-bold ",children:f({id:"coupon-sale"})}),Object(g.jsxs)("h1",{className:" font-bold",children:[x," ",null===b||void 0===b?void 0:b.currency.translation[p].symbol]})]}),Object(g.jsxs)("div",{className:"flex justify-between semibold items-center  my-2",children:[Object(g.jsx)("h1",{className:"font-bold",children:f({id:"subtotal"})}),Object(g.jsxs)("h1",{className:" font-bold",children:[h," ",null===b||void 0===b?void 0:b.currency.translation[p].symbol]})]}),Object(g.jsx)("hr",{className:"my-1"}),Object(g.jsx)("div",{className:" flex items-center my-2 text-center text-main-text ",children:Object(g.jsx)(s.b,{to:"/".concat(p,"/cart"),className:"flex-1 py-2 px-3 border font-semibold border-main-color text-main-color mx-1 hover:bg-main-color hover:text-main-text uppercase transition duration-150   rounded",children:f({id:"go-to-cart"})})})]})]})})}},480:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var c=n(115),a=n(2),r=n.n(a),s=n(104),i=n(78),l=n(10),o=n(1);function d(e){var t=e.productsLoading,n=e.categoryInfoLoading,a=e.setSelectedPrice,d=e.selectedPrice,u=Object(i.a)(),j=u.locale,h=u.formatMessage,x=r.a.useContext(l.a).deliveryCountry,b=r.a.useMemo((function(){return[1,5,10,20,50,100]}),[]);return n||t?Object(o.jsx)("div",{className:"py-2",children:Object(o.jsxs)(s.a,{speed:2,viewBox:"0 0 300 150",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:[Object(o.jsx)("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"100%",height:"30"}),Object(o.jsx)("rect",{x:"0",y:"40",rx:"5",ry:"5",width:"100%",height:"15"}),Object(o.jsx)("rect",{x:"0",y:"65",rx:"5",ry:"5",width:"100%",height:"15"}),Object(o.jsx)("rect",{x:"0",y:"90",rx:"5",ry:"5",width:"100%",height:"15"}),Object(o.jsx)("rect",{x:"0",y:"115",rx:"5",ry:"5",width:"100%",height:"15"})]})}):Object(o.jsxs)(c.a.div,{layout:!0,className:"mb-4",children:[Object(o.jsx)("h1",{className:"text-lg font-bold py-2",children:h({id:"filter-by-price"})}),Object(o.jsx)("hr",{}),b.map((function(e){var t=d===e;return Object(o.jsxs)("div",{className:"flex items-center my-1 text-lg",children:[Object(o.jsx)("input",{id:e,type:"radio",className:"border-gray-600 text-main-color",onChange:function(){a(e)},checked:!!t}),Object(o.jsx)("label",{htmlFor:e,className:" mx-5",children:"".concat(h({id:"less-than"})," ").concat(e," ").concat(null===x||void 0===x?void 0:x.currency.translation[j].symbol)})]},e)}))]})}},509:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return F}));var c=n(6),a=n(2),r=n.n(a),s=n(200),i=n(95),l=n(454),o=n(40),d=n(19),u=n(78),j=n(115),h=n(104),x=n(204),b=n(202),m=n(203),f=n(69),p=n(1);function v(e){var t=e.sortBy,n=e.query,c=e.handleSortByChange,a=e.productsCount,s=e.resultsPerPage,i=e.handleResultPerPageChange,l=Object(u.a)().formatMessage,o=r.a.useMemo((function(){return[{value:"newest",label:l({id:"Newest"})},{label:l({id:"Price (Low to High)"}),value:"price-asc"},{label:l({id:"Price (High to Low)"}),value:"price-desc"}]}),[l]),d=r.a.useMemo((function(){return[{label:30,value:30},{label:60,value:60}]}),[]);return Object(p.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 0.7fr 0.7fr",marginBottom:"0.5rem"},className:"border-b py-2",children:[Object(p.jsx)("div",{layout:!0,className:"flex items-center",children:a>0&&Object(p.jsx)("div",{className:" text-lg font-semibold",children:Object(p.jsxs)("h1",{children:[Object(p.jsx)("strong",{children:a>2&&a})," ",function(){switch(a){case 1:return l({id:"one-search-result"});case 2:return l({id:"two-search-results"});case a>10:return l({id:"more-than-10-search-results"});default:return l({id:"search-results"})}}()," ",Object(p.jsx)("strong",{children:n})]})})}),Object(p.jsxs)("div",{className:"flex items-center w-full",children:[Object(p.jsx)("h1",{className:"font-semibold",children:l({id:"number-per-page"})}),Object(p.jsx)(f.a,{isSearchable:!1,options:d,value:s,onChange:i,className:"mx-2 flex-1"})]}),Object(p.jsxs)("div",{className:"flex items-center w-full",children:[Object(p.jsx)("h1",{children:l({id:"sort-by"})}),Object(p.jsx)(f.a,{isSearchable:!1,options:o,value:t,onChange:c,className:"mx-2 flex-1"})]})]})}function y(e){var t,n,c=e.data,a=e.productsLoading,s=e.sortBy,i=e.handleRemoveFilters,l=e.handleSortByChange,o=e.filters,d=e.setCartMenuOpen,f=e.resultsPerPage,y=e.handleResultPerPageChange,g=e.query,O=Object(u.a)().formatMessage;return Object(p.jsxs)("div",{id:"top",style:{minHeight:"calc(100vh - 150px)"},children:[o.length>0||(null===c||void 0===c?void 0:c.pages[0].products.length)>0?Object(p.jsx)(v,{sortBy:s,handleSortByChange:l,productsCount:null===c||void 0===c||null===(t=c.pages[0].products)||void 0===t?void 0:t.length,handleResultPerPageChange:y,resultsPerPage:f,query:g}):a&&Object(p.jsx)(h.a,{speed:2,viewBox:"0 0 752 40",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:Object(p.jsx)("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"100%",height:"40"})}),0!==o.length&&Object(p.jsxs)("div",{className:"flex items-center",children:[Object(p.jsx)(j.a.h1,{layout:!0,className:"text-lg font-semibold",children:O({id:"filtered-by"})}),Object(p.jsx)(j.a.div,{layout:!0,className:"mx-1 flex items-center",children:o.map((function(e){return Object(p.jsxs)(j.a.button,{layout:!0,className:"mx-1 py-1 px-2 bg-main-color text-main-text rounded-full",onClick:function(){return i(e)},children:[O({id:e.type})," : ",e.value]},e.value)}))})]}),a&&Object(p.jsx)("div",{className:"py-2",children:Object(p.jsx)("div",{className:"category-page-items__grid py-2",style:{minHeight:"calc(100vh - 150px)"},children:[0,1,2,3,4,5,6,7,8,9].map((function(e){return Object(p.jsx)(x.a,{},e)}))})}),(null===c||void 0===c||null===(n=c.pages[0].products)||void 0===n?void 0:n.length)>0&&!a&&Object(p.jsx)("div",{className:"category-page-items__grid py-2 min-h-full relative",style:{minHeight:"calc(100vh - 150px)"},children:null===c||void 0===c?void 0:c.pages.map((function(e,t){return Object(p.jsx)(r.a.Fragment,{children:null===e||void 0===e?void 0:e.products.map((function(e){return"variation"===e.type&&Object.keys(e.new_variation_addons).length>0?Object(p.jsx)(m.a,{setCartMenuOpen:d,item:e},e.id):Object(p.jsx)(b.a,{setCartMenuOpen:d,item:e},e.id)}))},t)}))}),0===(null===c||void 0===c?void 0:c.pages[0].products.length)&&Object(p.jsx)("div",{className:"p-6 flex items-center justify-center text-xl flex-col h-full",children:O({id:"no-products"})})]})}var g=n(480);function O(e){var t=e.productsLoading,n=e.products,a=e.brandFilters,s=e.priceFilters,i=e.handleSubmitFilters,l=e.filters,o=Object(u.a)().formatMessage,d=r.a.useState((function(){return a.length>0?a:[]})),j=Object(c.a)(d,2),x=j[0],b=j[1],m=r.a.useState((function(){return s||null})),f=Object(c.a)(m,2),v=f[0],y=f[1];return r.a.useState((function(){b((function(){return a.length>0?a:[]})),y((function(){return s||null}))}),[s,a]),Object(p.jsxs)("div",{className:"py-2",children:[l.length>0||(null===n||void 0===n?void 0:n.length)>0?Object(p.jsx)(g.a,{priceFilters:s,productsLoading:t,selectedPrice:v,setSelectedPrice:y}):t&&Object(p.jsx)("div",{className:"py-2",children:Object(p.jsxs)(h.a,{speed:2,viewBox:"0 0 300 150",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:[Object(p.jsx)("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"100%",height:"35"}),Object(p.jsx)("rect",{x:"0",y:"40",rx:"5",ry:"5",width:"100%",height:"15"}),Object(p.jsx)("rect",{x:"0",y:"65",rx:"5",ry:"5",width:"100%",height:"15"}),Object(p.jsx)("rect",{x:"0",y:"90",rx:"5",ry:"5",width:"100%",height:"15"}),Object(p.jsx)("rect",{x:"0",y:"115",rx:"5",ry:"5",width:"100%",height:"15"})]})}),l.length>0||(null===n||void 0===n?void 0:n.length)>0?Object(p.jsx)("div",{className:"p-2",children:Object(p.jsx)("button",{disabled:!v&&0===x.length,className:"p-2 uppercase bg-green-700 text-main-text rounded w-full",onClick:function(){i(v,x)},children:o({id:"submit"})})}):null]})}var N=n(144),C=n(457),w=n(178),P=n(10),S=n(17),k=n.n(S);n(37);function F(){var e=Object(o.i)().query,t=Object(u.a)(),n=t.formatMessage,a=t.locale,h=r.a.useState([]),x=Object(c.a)(h,2),b=x[0],m=x[1],f=r.a.useState({value:"newest",label:n({id:"Newest"})}),v=Object(c.a)(f,2),g=v[0],S=v[1],F=r.a.useState({label:30,value:60}),M=Object(c.a)(F,2),_=M[0],B=M[1],L=r.a.useState(null),q=Object(c.a)(L,2),R=q[0],H=q[1],E=r.a.useState([]),I=Object(c.a)(E,2),T=I[0],D=I[1],J=r.a.useState(!1),G=Object(c.a)(J,2),z=G[0],A=G[1],K=r.a.useContext(P.a).deliveryCountry,Q=Object(l.a)(["searchProducts",{query:e,resultsPerPage:_,priceFilters:R,brandFilters:b,sortBy:g}],(function(t){var n=t.pageParam;return Object(d.P)({query:e,resultsPerPage:_,pageParam:n,brandFilters:b,priceFilters:R,sortBy:g})}),{retry:!0,getNextPageParam:function(e){return e.currentPage<e.lastPage?e.currentPage+1:void 0}}),U=Q.data,V=Q.isLoading,W=Q.isFetching,X=Q.fetchNextPage,Y=Q.isFetchingNextPage,Z=Q.hasNextPage;return Object(p.jsxs)(i.a,{children:[Object(p.jsx)(s.a,{children:Object(p.jsxs)("title",{children:[n({id:"search-for"})," ",e]})}),Object(p.jsxs)(N.a,{children:[z&&Object(p.jsx)(C.a,{setSideMenuOpen:A},"side-cart"),z&&Object(p.jsx)(j.a.div,{initial:{opacity:0},animate:{opacity:.5},exit:{opacity:0},onClick:function(){return A(!1)},className:"side__addCart-bg"},"sidecart-bg")]}),Object(p.jsxs)("div",{className:"max-w-default mx-auto p-4 overflow-hidden",style:{minHeight:"calc(100vh - 150px)"},children:[Object(p.jsxs)("div",{className:"search-page__container",children:[Object(p.jsx)(O,{products:null===U||void 0===U?void 0:U.pages[0].products,productsLoading:V,brandFilters:b,setBrandFilters:m,priceFilters:R,productsFetching:W,handleSubmitFilters:function(e,t){m(t),H(e),Object(w.b)(window,{top:50,behavior:"smooth"}),D((function(){if(e&&!t.length>0)return[{type:"Price",value:"".concat(n({id:"less-than"})," ").concat(e," ").concat(null===K||void 0===K?void 0:K.currency.translation[a].symbol)}];if(!e&&t.length>0){var c=[];return t.forEach((function(e){return c.push({type:"Brand",value:e.label})})),[].concat(c)}var r={type:"Price",value:"".concat(n({id:"less-than"})," ").concat(e," ").concat(null===K||void 0===K?void 0:K.currency.translation[a].symbol)},s=[];return t.forEach((function(e){return s.push({type:"Brand",value:e.label})})),[r].concat(s)}))},filters:T}),Object(p.jsx)(y,{data:U,productsLoading:V,sortBy:g,setResultsPerPage:B,filters:T,handleRemoveFilters:function(e){D((function(t){return t.filter((function(t){return t.value!==e.value}))})),"Brand"===e.type&&m((function(t){return t.filter((function(t){return t.label!==e.value}))})),"Sort"===e.type&&S({value:"newest",label:n({id:"Newest"})}),"Price"===e.type&&H(null)},handleSortByChange:function(e){if("newest"===e.value)return D((function(e){return e.filter((function(e){return"Sort"!==e.type}))})),void S(e);D((function(t){var n=t.filter((function(e){return"Sort"!==e.type}));return n.push({type:"Sort",value:e.label}),n})),S(e)},setCartMenuOpen:A,resultsPerPage:_,handleResultPerPageChange:function(e){B(e)},query:e})]}),U&&Z&&Object(p.jsx)("div",{className:"flex my-2 justify-center",children:Object(p.jsx)("button",{className:"p-2 w-40 text-lg font-semibold flex items-center justify-center rounded bg-main-color text-main-text",onClick:function(){X()},children:Y?Object(p.jsx)(k.a,{type:"ThreeDots",color:"#fff",height:27,width:27,visible:!0}):n({id:"show-more"})})})]})]})}}}]);
//# sourceMappingURL=14.3d6934e6.chunk.js.map