(this["webpackJsonproyal-pharmacy"]=this["webpackJsonproyal-pharmacy"]||[]).push([[22],{464:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(4),r=n.n(a),c=n(9),s=n(6),i=n(115),o=n(2),l=n.n(o),u=n(78),d=n(17),b=n.n(d),j=(n(37),n(8)),h=n(18),m=n(39),v=n(10),f=n(62),p=n(1);function x(e){var t=e.item,n=e.setSideMenuOpen,a=l.a.useContext(m.a),o=a.removeFromCartMutation,d=a.removeFromGuestCartMutation,x=a.coupon,O=l.a.useState(!1),y=Object(s.a)(O,2),g=y[0],N=y[1],w=l.a.useContext(h.a).userId,C=l.a.useContext(v.a).deliveryCountry,P=Object(u.a)(),S=P.locale,k=P.formatMessage,F=function(){var e=Object(c.a)(r.a.mark((function e(){var n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(!0),e.prev=1,!w){e.next=10;break}return n=t.id,a=t.cart_id,e.next=7,o({id:n,cart_id:a,userId:w,deliveryCountry:C,coupon:x});case 7:N(!1),e.next=14;break;case 10:return c=t.options.sku,e.next=13,d({sku:c,deliveryCountry:C,coupon:x});case 13:N(!1);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),N(!1);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}(),_={hidden:{x:"".concat("ar"===S?"100%":"-100%")},visible:{x:0},exited:{opacity:0}};return Object(p.jsxs)(i.a.div,{variants:_,initial:"hidden",animate:"visible",exit:"exited",className:" side-cart-menu__item-mobile mb-2",children:[Object(p.jsx)("div",{className:"",children:Object(p.jsx)(j.b,{title:t["name_".concat(S)],className:"hover:underline",to:"/".concat(S,"/products/").concat(t.slug,"/").concat(t.id),onClick:function(){return n(!1)},children:Object(p.jsx)(f.a,{src:null===t||void 0===t?void 0:t.image,origin:"small",pb:"calc(100% * 150/150)",alt:t["name_".concat(S)]})})}),Object(p.jsxs)("div",{className:"",children:[Object(p.jsx)(j.b,{title:t["name_".concat(S)],className:"hover:underline",to:"/".concat(S,"/products/").concat(t.slug,"/").concat(t.id),onClick:function(){return n(!1)},children:Object(p.jsx)("h1",{className:"font-semibold text-clamp-2 text-sm uppercase ",children:"".concat(t["name_".concat(S)]).concat(t.options.addons?" - ".concat(Object.keys(t.options.addons).map((function(e){return t.options.addons[e]})).join(" - ")):"")})}),Object(p.jsxs)("div",{className:"flex items-center text-gray-700",children:[Object(p.jsxs)("div",{className:"flex items-center",children:[Object(p.jsx)("h1",{className:"text-xs font-semibold",children:k({id:"price"})}),Object(p.jsxs)("h1",{className:"text-xs font-bold mx-1",children:[t.total," ",null===C||void 0===C?void 0:C.currency.translation[S].symbol]})]}),Object(p.jsxs)("div",{className:"flex items-center text-xs mx-2",children:[Object(p.jsxs)("h1",{className:"font-semibold",children:[k({id:"qty"})," :"]}),Object(p.jsx)("h1",{className:"mx-1 font-bold",children:t.qty})]})]}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{className:"\n              bg-main-color text-main-text\n             text-xs rounded p-1 my-1 flex items-center justify-center font-semibold uppercase",onClick:F,style:{width:"140px"},children:g?Object(p.jsx)(b.a,{type:"ThreeDots",color:"#fff",height:18,width:18,visible:!0}):k({id:"remove-from-cart"})})})]})]})}},490:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return P}));var a=n(6),r=n(2),c=n.n(r),s=n(78),i=n(454),o=n(40),l=n(210),u=n(246),d=n(95),b=n(19),j=n(144),h=n(115),m=n(452),v=n(464),f=n(17),p=n.n(f),x=(n(37),n(178)),O=n(10),y=n(205),g=n(39),N=n(18),w=n(50),C=n(1);function P(){var e,t,n,f=Object(o.i)().query,P=Object(s.a)(),S=P.locale,k=P.formatMessage,F=c.a.useState([]),_=Object(a.a)(F,2),B=_[0],M=_[1],q=c.a.useState({value:"newest",label:"Newest"}),E=Object(a.a)(q,2),I=E[0],L=E[1],T=c.a.useState(null),D=Object(a.a)(T,2),J=D[0],G=D[1],Q=c.a.useState([]),R=Object(a.a)(Q,2),Y=R[0],z=R[1],A=c.a.useState({label:20,value:20}),H=Object(a.a)(A,2),K=H[0],U=H[1],V=Object(r.useContext)(N.a).userId,W=Object(r.useContext)(g.a),X=W.cartItems,Z=W.guestCartItems,$=c.a.useState(!1),ee=Object(a.a)($,2),te=ee[0],ne=ee[1],ae=c.a.useState(!1),re=Object(a.a)(ae,2),ce=re[0],se=re[1],ie=c.a.useState(!1),oe=Object(a.a)(ie,2),le=oe[0],ue=oe[1],de=c.a.useState(!1),be=Object(a.a)(de,2),je=be[0],he=be[1],me=c.a.useContext(O.a),ve=me.deliveryCountry,fe=me.sideMenuOpen,pe=me.mobileCartPopupOpen,xe=Object(w.useMediaQuery)({query:"(min-width:768px)"});c.a.useEffect((function(){var e=function(){window.scrollY>=200?he(!0):he(!1)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}})),c.a.useEffect((function(){ce&&setTimeout((function(){return se(!1)}),100),le&&setTimeout((function(){return ue(!1)}),100)}),[je]);var Oe=Object(i.a)(["searchProducts",{query:f,resultsPerPage:K,priceFilters:J,brandFilters:B,sortBy:I}],(function(e){var t=e.pageParam;return Object(b.P)({query:f,resultsPerPage:K,pageParam:t,brandFilters:B,priceFilters:J,sortBy:I})}),{retry:!0,getNextPageParam:function(e){return e.currentPage<e.lastPage?e.currentPage+1:void 0}}),ye=Oe.data,ge=Oe.isLoading,Ne=Oe.fetchNextPage,we=Oe.isFetchingNextPage,Ce=Oe.hasNextPage;return Object(C.jsxs)(d.a,{children:[Object(C.jsxs)("div",{className:"min-h-screen relative",children:[Object(C.jsxs)(j.a,{children:[te&&Object(C.jsx)(v.a,{setSideMenuOpen:ne},"side-cart"),te&&Object(C.jsx)(h.a.div,{initial:{opacity:0},animate:{opacity:.5},exit:{opacity:0},onClick:function(){return ne(!1)},className:"side__addCart-bg"},"sidecart-bg")]}),Y.length>0||(null===ye||void 0===ye?void 0:ye.pages[0].products.length)>0?Object(C.jsx)("div",{className:"mb-1",children:Object(C.jsx)("div",{className:"px-3 pt-3",children:Object(C.jsxs)("h1",{className:"font-semibold text-lg",children:[(null===ye||void 0===ye||null===(e=ye.pages[0].products)||void 0===e?void 0:e.length)>2&&(null===ye||void 0===ye||null===(t=ye.pages[0].products)||void 0===t?void 0:t.length)," ",function(){var e,t,n;switch(null===ye||void 0===ye||null===(e=ye.pages[0].products)||void 0===e?void 0:e.length){case 1:return k({id:"one-search-result"});case 2:return k({id:"two-search-results"});case(null===ye||void 0===ye||null===(t=ye.pages[0].products)||void 0===t?void 0:t.length)>10&&(null===ye||void 0===ye||null===(n=ye.pages[0].products)||void 0===n?void 0:n.length):return k({id:"more-than-10-search-results"});default:return k({id:"search-results"})}}()," ",Object(C.jsx)("strong",{children:f})]})})}):null,Object(C.jsx)(m.a,{children:Object(C.jsx)(h.a.div,{layout:!0,className:"px-3",children:0!==Y.length&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(h.a.h1,{layout:!0,className:" mb-1 font-semibold",children:[k({id:"filtered-by"})," :"]}),Object(C.jsx)(h.a.div,{layout:!0,className:"flex items-center",children:Y.map((function(e){return Object(C.jsxs)(h.a.button,{layout:!0,className:"mx-1 py-1 px-3 bg-main-color text-main-text rounded-full",onClick:function(){return t=e,z((function(e){return e.filter((function(e){return e.value!==t.value}))})),"Brand"===t.type&&M((function(e){return e.filter((function(e){return e.label!==t.value}))})),"Sort"===t.type&&L({value:"newest",label:"Newest"}),void("Price"===t.type&&z((function(e){return e.filter((function(e){return"Price"!==e.type}))})));var t},children:[k({id:e.type})," : ",e.value]},e.value)}))})]})})}),Object(C.jsx)("hr",{className:"my-3"}),Object(C.jsx)(l.a,{data:ye,productsLoading:ge,setCartMenuOpen:ne,handleResultPerPageChange:function(e){U(e)}}),Object(C.jsx)(j.a,{children:je&&!fe&&0!==(null===ye||void 0===ye||null===(n=ye.pages[0].products)||void 0===n?void 0:n.length)&&Object(C.jsx)(u.a,{productsLoading:ge,products:null===ye||void 0===ye?void 0:ye.pages[0].products,brandFilters:B,setSortByOpen:se,setFiltersOpen:ue,filtersOpen:le,sortByOpen:ce,sortBy:I,handleSortByChange:function(e){if("newest"===e.value)return z((function(e){return e.filter((function(e){return"Sort"!==e.type}))})),void L(e);z((function(t){var n=t.filter((function(e){return"Sort"!==e.type}));return n.push({type:"Sort",value:e.label}),n})),L(e)},priceFilters:J,handleSubmitFilters:function(e,t){M(t),G(e),Object(x.b)(window,{top:300,behavior:"smooth"}),z((function(){if(e&&!t.length>0)return[{type:"Price",value:"".concat(k({id:"less-than"})," ").concat(e," ").concat(null===ve||void 0===ve?void 0:ve.currency.translation[S].symbol)}];if(!e&&t.length>0){var n=[];return t.forEach((function(e){return n.push({type:"Brand",value:e.label})})),[].concat(n)}var a={type:"Price",value:"".concat(k({id:"less-than"})," ").concat(e," ").concat(null===ve||void 0===ve?void 0:ve.currency.translation[S].symbol)},r=[];return t.forEach((function(e){return r.push({type:"Brand",value:e.label})})),[a].concat(r)}))}})})]}),ye&&Ce&&Object(C.jsx)("div",{className:"flex my-2 justify-center",children:Object(C.jsx)("button",{className:"p-2 w-40 text-lg font-semibold flex items-center justify-center rounded bg-main-color text-main-text",onClick:function(){Ne()},children:we?Object(C.jsx)(p.a,{type:"ThreeDots",color:"#fff",height:27,width:27,visible:!0}):k({id:"show-more"})})}),Object(C.jsx)(j.a,{children:function(){if(xe)return!1;if(fe)return!1;if(V){if((null===X||void 0===X?void 0:X.length)>0)return!0}else{if((null===Z||void 0===Z?void 0:Z.length)>0)return!0;if(pe)return!0}return!1}()&&Object(C.jsx)(y.a,{})})]})}}}]);
//# sourceMappingURL=22.ea65ddc5.chunk.js.map