(this["webpackJsonproyal-pharmacy"]=this["webpackJsonproyal-pharmacy"]||[]).push([[32],{514:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return A}));var c=s(4),a=s.n(c),r=s(9),i=s(5),d=s(6),l=s(45),n=s(38),o=s(2),j=s.n(o),b=s(78),m=s(8),x=s(17),h=s.n(x),u=(s(37),s(95)),O=s(69),p=s(25),f=s(56),y=s(10),v=s(19),N=s(452),g=s(115),w=s(144),k=s(145),_=s(146),C=s(149),S=s(147),M=s(94),z=s(458),q=s.n(z),T=s(1);function W(e){var t=e.orders,s=Object(b.a)().formatMessage,c=j.a.useState(!1),a=Object(d.a)(c,2),r=a[0],i=a[1],l=j.a.useState(null),n=Object(d.a)(l,2),o=n[0],m=n[1],x=function(e){switch(e){case"completed":return Object(T.jsxs)("div",{className:" text-body-text-dark flex items-center rounded  px-3 py-2  font-semibold bg-green-700  ",children:[Object(T.jsx)("h1",{children:s({id:"order-status"})}),":",Object(T.jsx)("h1",{className:"mx-1",children:s({id:"order-completed"})})]});case"canceled":return Object(T.jsxs)("div",{className:" text-body-text-dark flex items-center rounded px-3 py-2 font-semibold bg-main-color  ",children:[Object(T.jsx)("h1",{children:s({id:"order-status"})}),":",Object(T.jsx)("h1",{className:"mx-1",children:s({id:"order-cancelled"})})]});case"pending":return Object(T.jsxs)("div",{className:" text-body-text-dark  flex items-center rounded  px-3 py-2  font-semibold bg-yellow-600  ",children:[Object(T.jsx)("h1",{children:s({id:"order-status"})}),":",Object(T.jsx)("h1",{className:"mx-1",children:s({id:"order-pending"})})]});case"delivery":return Object(T.jsxs)("div",{className:" text-body-text-dark  flex items-center rounded  px-3 py-2 font-semibold bg-blue-600  ",children:[Object(T.jsx)("h1",{children:s({id:"order-status"})}),":",Object(T.jsx)("h1",{className:"mx-1",children:s({id:"order-delivery"})})]});case"waiting_for_payment":return Object(T.jsxs)("div",{className:" text-body-text-dark flex items-center  rounded px-3 py-2 font-semibold bg-yellow-600  ",children:[Object(T.jsx)("h1",{children:s({id:"order-status"})}),":",Object(T.jsx)("h1",{className:"mx-1",children:s({id:"order-waiting-for-payment"})})]});case"confirmed":return Object(T.jsxs)("div",{className:" text-body-text-dark flex items-center rounded px-3 py-2  font-semibold bg-blue-600  ",children:[Object(T.jsx)("h1",{children:s({id:"order-status"})}),":",Object(T.jsx)("h1",{className:"mx-1",children:s({id:"order-confirmed"})})]});case"new":return Object(T.jsxs)("div",{className:"text-body-text-dark px-3 py-2 rounded  font-semibold flex items-center  bg-blue-600  ",children:[Object(T.jsx)("h1",{children:s({id:"order-status"})}),":",Object(T.jsx)("h1",{className:"mx-1",children:s({id:"order-new"})})]})}},h={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return 0===t.length?Object(T.jsx)("div",{className:"flex justify-center items-center",style:{height:"calc(100vh - 140px)"},children:s({id:"no-orders-placed"})}):Object(T.jsx)(N.a,{children:Object(T.jsxs)(g.a.div,{layout:!0,variants:{hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{staggerChildren:.1,when:"beforeChildren"}}},initial:"hidden",animate:"visible",className:" guest-orders-grid__desktop mb-6",children:[Object(T.jsx)("div",{className:"max-h-full p-3 overflow-y-auto",children:t.map((function(e){return Object(T.jsxs)(g.a.div,{layout:!0,onClick:function(){m(e.id),i(!0)},variants:h,className:"mb-3  mx-1 cursor-pointer w-full rounded-lg ".concat(o===e.id?"bg-gray-800":"bg-gray-900","  hover:bg-gray-800 transition duration-200 text-main-text"),children:[x(e.status),Object(T.jsxs)("div",{className:"p-3",children:[Object(T.jsxs)("div",{className:"flex items-center font-bold",children:[Object(T.jsx)("h1",{children:s({id:"order-number"})}),Object(T.jsx)("h1",{className:"mx-1",children:e.id})]}),Object(T.jsxs)("div",{className:"flex items-center font-bold",children:[Object(T.jsx)("h1",{children:s({id:"order-date"})}),Object(T.jsx)("h1",{className:"mx-1",children:q()(e.created_at).format("DD/MM/YYYY - HH:MM")})]}),Object(T.jsxs)("div",{className:"flex items-center text-sm",children:[Object(T.jsxs)("h1",{className:"text-gray-600",children:["completed"===e.status?s({id:"delivery-status"}):s({id:"expected-delivery"})," ",":"]}),Object(T.jsx)("h1",{className:"mx-1",children:"completed"===e.status?s({id:"delivered"}):"Soon"})]}),Object(T.jsxs)("div",{className:"text-sm",children:[Object(T.jsxs)("h1",{className:"text-gray-600",children:[s({id:"payment-method"})," :"]}),(t=e.payment_method,"knet"===t?Object(T.jsxs)("div",{className:"  flex  items-center justify-start  p-2 font-semibold",children:[Object(T.jsx)("img",{src:k.a,alt:t}),Object(T.jsx)("div",{className:"flex-1 mx-3 text-left",children:"K-net"})]}):"credit"===t?Object(T.jsxs)("div",{className:"  flex  items-center justify-start  p-2 font-semibold",children:[Object(T.jsx)("img",{src:_.a,alt:t}),Object(T.jsx)("div",{className:"flex-1 mx-3 text-left",children:"Credit Card"})]}):"amex"===t?Object(T.jsxs)("div",{className:" flex  items-center justify-start  p-2 font-semibold",children:[Object(T.jsx)("img",{src:S.a,alt:t}),Object(T.jsx)("div",{className:"flex-1 mx-3 text-left",children:"American Express"})]}):"cod"===t?Object(T.jsxs)("div",{className:"  flex  items-center justify-start  p-2 font-semibold",children:[Object(T.jsx)("img",{src:C.a,alt:t}),Object(T.jsx)("div",{className:"flex-1 mx-3 text-left",children:s({id:"cash-on-delivery"})})]}):void 0)]})]})]},e.id);var t}))}),Object(T.jsxs)("div",{className:"shadow rounded-lg max-h-full overflow-y-auto",children:[!o&&Object(T.jsx)("div",{className:"text-2xl p-3 h-full flex items-center justify-center font-semibold",children:s({id:"select-order-to-display"})}),Object(T.jsx)(w.a,{children:r&&Object(T.jsx)(Y,{id:o})})]})]})})}var Y=function(e){var t=e.id,s=Object(b.a)(),c=s.locale,a=s.formatMessage,r=j.a.useContext(y.a).deliveryCountry,i=Object(M.a)(["single-guest-order",t],(function(){return Object(v.z)(t)}),{retry:!0,refetchOnWindowFocus:!1}),d=i.data;return i.isLoading?Object(T.jsx)("div",{className:"flex h-full justify-center items-center",children:Object(T.jsx)(h.a,{type:"ThreeDots",color:"#b72b2b",height:40,width:40,visible:!0})}):Object(T.jsxs)(g.a.div,{variants:{hidden:{opacity:0},visible:{opacity:1},exited:{opacity:0}},initial:"hidden",animate:"visible",exit:"exited",children:[Object(T.jsx)("div",{className:"p-2 border-b",children:Object(T.jsx)("h1",{className:"font-bold text-xl",children:a({id:"delivery"})})}),Object(T.jsxs)(g.a.div,{className:"flex justify-between p-2",layout:!0,children:[Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{className:" font-semibold",children:[Object(T.jsx)("h1",{className:"text-gray-700 font-bold text-lg",children:a({id:"full-name"})}),Object(T.jsx)("h1",{children:d.address.customer.name})]}),d.address.customer.email&&Object(T.jsxs)("div",{className:" font-semibold",children:[Object(T.jsx)("h1",{className:"text-gray-700 font-bold text-lg",children:a({id:"full-name"})}),Object(T.jsx)("h1",{children:d.address.customer.email})]}),Object(T.jsxs)("div",{className:" font-semibold",children:[Object(T.jsx)("h1",{className:"text-gray-700 font-bold text-lg",children:a({id:"phone-number"})}),Object(T.jsx)("h1",{children:d.address.customer.mobile})]}),Object(T.jsxs)("div",{className:" font-semibold",children:[Object(T.jsx)("h1",{className:"text-gray-700 font-bold text-lg",children:a({id:"location"})}),Object(T.jsx)("h1",{children:"".concat("map"===d.address.type?d.address.marked_address:d.address.userTyped_address)})]}),Object(T.jsxs)("div",{className:"font-semibold",children:[Object(T.jsx)("h1",{className:"text-gray-700 text-lg font-bold",children:a({id:"maps-detailed-address-apartment"})}),Object(T.jsx)("h1",{children:d.address.apartment_house_number})]}),d.address.building_tower_number&&Object(T.jsxs)("div",{className:"font-semibold",children:[Object(T.jsx)("h1",{className:"text-gray-800  font-bold",children:a({id:"maps-detailed-address-building"})}),Object(T.jsx)("h1",{children:d.address.building_tower_number})]}),d.address.addition_direction&&Object(T.jsxs)("div",{className:"font-semibold",children:[Object(T.jsx)("h1",{className:"text-gray-800 font-bold",children:a({id:"maps-details-extra-details"})}),Object(T.jsx)("h1",{children:d.address.addition_direction})]})]}),Object(T.jsx)(g.a.div,{layout:!0,children:"map"===d.address.type&&d.address.lat&&Object(T.jsx)("img",{src:"https://maps.googleapis.com/maps/api/staticmap?center=".concat(d.address.lat,",").concat(d.address.lng,"&zoom=15&size=150x150&\n              markers=color:blue%7C").concat(d.address.lat,"-").concat(d.address.lng,"&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg"),alt:"map"})})]}),Object(T.jsx)("hr",{className:"my-4"}),Object(T.jsx)("div",{className:"p-2 border-b",children:Object(T.jsx)("h1",{className:"font-bold text-xl",children:a({id:"order-receipt"})})}),Object(T.jsxs)("div",{className:"p-2 text-lg",children:[Object(T.jsxs)("div",{className:"my-orders-items__table-desktop font-semibold text-center mb-3",children:[Object(T.jsx)("h1",{children:"#"}),Object(T.jsx)("h1",{children:a({id:"the-item"})}),Object(T.jsx)("h1",{children:a({id:"quantity"})}),Object(T.jsx)("h1",{children:a({id:"price"})}),Object(T.jsx)("h1",{children:a({id:"total"})})]}),d.items.map((function(e,t){return Object(T.jsxs)("div",{className:"my-orders-item-desktop text-base text-center",children:[Object(T.jsx)("div",{className:"",children:Object(T.jsx)("h1",{className:"",children:t+1})}),Object(T.jsx)(m.b,{to:"/".concat(c,"/products/").concat(e.product.slug,"/").concat(e.id),className:"hover:underline truncate uppercase font-semibold block",children:e.product.translation[c].title}),Object(T.jsx)("div",{className:"",children:Object(T.jsx)("h1",{className:"",children:e.qty})}),Object(T.jsx)("div",{style:{fontWeight:900},children:Object(T.jsxs)("h1",{className:"",children:[e.price," "]})}),Object(T.jsx)("div",{style:{fontWeight:900},className:"text-green-700",children:Object(T.jsxs)("h1",{className:"",children:[(e.price*e.qty).toFixed(3)," ",null===r||void 0===r?void 0:r.currency.translation[c].symbol]})})]},e.id)})),Object(T.jsx)("hr",{className:"my-3"}),Object(T.jsxs)("div",{className:"my-orders-receipt-summary font-bold",children:[Object(T.jsx)("h1",{children:a({id:"cart-total"})}),Object(T.jsxs)("h1",{className:"text-center",children:[d.subtotal," ",Object(T.jsx)("span",{className:"mx-1",children:null===r||void 0===r?void 0:r.currency.translation[c].symbol})]}),Object(T.jsx)("h1",{children:a({id:"cart-delivery-cost"})}),Object(T.jsxs)("h1",{className:"text-center",children:["0"===d.shipping_cost?a({id:"cart-free"}):d.shipping_cost," ",Object(T.jsx)("span",{className:"mx-1",children:null===r||void 0===r?void 0:r.currency.translation[c].symbol})]}),"0.000"!==d.coupon_cost&&Object(T.jsx)("h1",{className:"mb-2 text-green-700",children:a({id:"coupon-sale"})}),"0.000"!==d.coupon_cost&&Object(T.jsxs)("h1",{className:"mb-2 text-center text-green-700",children:[d.coupon_cost,Object(T.jsx)("span",{className:"mx-1",children:null===r||void 0===r?void 0:r.currency.translation[c].symbol})]}),Object(T.jsx)("h1",{className:"text-green-700 text-xl font-bold",style:{fontWeight:900},children:a({id:"subtotal"})}),Object(T.jsxs)("h1",{className:"text-green-700 text-lg font-bold text-center",style:{fontWeight:900},children:[d.total," ",null===r||void 0===r?void 0:r.currency.translation[c].symbol]})]})]})]})},D=[{value:"+965",label:"+965"},{value:"+966",label:"+966"}],F=function(e){var t=e.label,s=(e.value,e.name),c=e.countryCode,a=e.setCountryCode,r=Object(l.a)(e,["label","value","name","countryCode","setCountryCode"]),o=Object(n.b)(s),j=Object(d.a)(o,2),b=j[0],m=j[1];return Object(T.jsxs)("div",{className:"w-full mb-2 flex flex-col ",children:[Object(T.jsx)("label",{htmlFor:s,className:"text-sm font-semibold text-gray-800 mb-1",children:t}),Object(T.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"0.5fr 1fr",gap:"0.5rem"},children:[Object(T.jsx)(O.a,{options:D,isSearchable:!1,value:c,onChange:a,styles:{dropdownIndicator:function(e){return Object(i.a)(Object(i.a)({},e),{},{padding:"0.25rem"})},valueContainer:function(e){return Object(i.a)(Object(i.a)({},e),{},{padding:"0.5rem"})}}}),Object(T.jsx)("input",Object(i.a)(Object(i.a)(Object(i.a)({},b),r),{},{onBlur:function(e){b.onBlur(e)},className:" border rounded w-full p-2 ".concat(m.error&&"border-main-color")}))]}),m.touched&&m.error?Object(T.jsx)("h1",{className:"text-xs text-main-color mt-1",children:m.error}):Object(T.jsx)("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"},children:" "})]})};function A(){var e=j.a.useContext(y.a).settings,t=j.a.useState(D[0]),s=Object(d.a)(t,2),c=s[0],i=s[1],l=Object(b.a)(),o=l.formatMessage,x=l.locale,O=j.a.useState(!1),N=Object(d.a)(O,2),k=N[0],_=N[1],C=j.a.useState(""),S=Object(d.a)(C,2),M=S[0],z=S[1],q=j.a.useState(!1),Y=Object(d.a)(q,2),A=Y[0],H=Y[1],V=j.a.useState([]),B=Object(d.a)(V,2),E=B[0],I=B[1],J=p.a({phoneNumber:p.c().matches(/^\d+$/,o({id:"number-only"})).required(o({id:"phone-empty"}))});return Object(T.jsxs)(u.a,{children:[Object(T.jsx)(w.a,{children:!A&&Object(T.jsxs)(g.a.div,{initial:!1,exit:{opacity:0},className:" text-gray-900 relative max-w-screen-sm mx-auto flex items-center justify-center",style:{height:"calc(100vh - 56px)"},children:[k&&Object(T.jsx)(f.a,{message:M,closeFunction:function(){_(!1)}}),Object(T.jsxs)(g.a.div,{className:" z-2  overflow-hidden",children:[Object(T.jsxs)("div",{className:"flex items-center flex-col mb-4  rounded-lg text-center ",children:[Object(T.jsx)(m.b,{to:"/".concat(x,"/"),children:Object(T.jsx)("img",{src:null===e||void 0===e?void 0:e.store_logo_color,alt:"",className:" mb-3",style:{width:"100px",height:"50px"}})}),Object(T.jsx)("h2",{className:"text-xl mb-2 text-center font-bold",children:o({id:"track-my-order"})}),Object(T.jsx)("h1",{className:"font-semibold",children:o({id:"track-order-enter-your-phone"})})]}),Object(T.jsx)("div",{className:"rounded-lg border bg-gray-100 mb-2",children:Object(T.jsx)(n.a,{initialValues:{phoneNumber:""},validationSchema:J,onSubmit:function(){var e=Object(r.a)(a.a.mark((function e(t,s){var r,i,d,l,n,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!1),e.prev=1,e.next=4,Object(v.Q)({phoneNumber:"".concat(c.value).concat(t.phoneNumber)});case 4:r=e.sent,I(r.orders),H(!0),s.setSubmitting(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),"user not exists"===(null===(i=e.t0.response)||void 0===i||null===(d=i.data)||void 0===d?void 0:d.message)?(_(!0),z(o({id:"track-order-no-orders"}))):"The selected mobile is invalid."===(null===(l=e.t0.response)||void 0===l||null===(n=l.data)||void 0===n||null===(j=n.message)||void 0===j?void 0:j.mobile[0])?s.setErrors({phoneNumber:o({id:"invalid-phone"})}):(_(!0),z(o({id:"something-went-wrong-snackbar"})));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,s){return e.apply(this,arguments)}}(),children:function(e){var t=e.handleSubmit,s=e.values,a=e.isSubmitting;return Object(T.jsxs)("form",{className:"px-3 py-2",onSubmit:t,children:[Object(T.jsx)(F,{label:o({id:"phone-label"}),name:"phoneNumber",value:s.phoneNumber,countryCode:c,setCountryCode:i}),Object(T.jsx)("div",{className:" py-1 mt-2",children:Object(T.jsxs)("button",{disabled:a,type:"submit",className:"".concat(a?"bg-main-color cursor-not-allowed":"bg-main-color text-main-text hover:bg-main-color"," w-full rounded uppercase flex items-center justify-center  p-2 font-semibold  transition duration-150 "),children:[Object(T.jsx)(h.a,{type:"ThreeDots",color:"#fff",height:24,width:24,visible:a}),!a&&o({id:"btn-track"})]})})]})}})})]})]})}),Object(T.jsx)(w.a,{children:A&&Object(T.jsx)(W,{orders:E})})]})}}}]);
//# sourceMappingURL=32.41291e77.chunk.js.map