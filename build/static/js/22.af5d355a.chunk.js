(this["webpackJsonproyal-pharmacy"]=this["webpackJsonproyal-pharmacy"]||[]).push([[22],{462:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(4),c=n.n(a),s=n(9),i=n(5),r=n(114),l=n(2),o=n.n(l),u=n(78),d=n(17),b=n.n(d),m=(n(38),n(8)),j=n(18),p=n(39),v=n(10),f=n(62),h=n(1);function x(e){var t=e.item,n=e.setSideMenuOpen,a=o.a.useContext(p.a),l=a.removeFromCartMutation,d=a.removeFromGuestCartMutation,x=a.coupon,O=o.a.useState(!1),y=Object(i.a)(O,2),g=y[0],N=y[1],C=o.a.useContext(j.a).userId,w=o.a.useContext(v.a).deliveryCountry,P=Object(u.a)(),S=P.locale,k=P.formatMessage,F=function(){var e=Object(s.a)(c.a.mark((function e(){var n,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(!0),e.prev=1,!C){e.next=10;break}return n=t.id,a=t.cart_id,e.next=7,l({id:n,cart_id:a,userId:C,deliveryCountry:w,coupon:x});case 7:N(!1),e.next=14;break;case 10:return s=t.options.sku,e.next=13,d({sku:s,deliveryCountry:w,coupon:x});case 13:N(!1);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),N(!1);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}(),L={hidden:{x:"".concat("ar"===S?"100%":"-100%")},visible:{x:0},exited:{opacity:0}};return Object(h.jsxs)(r.a.div,{variants:L,initial:"hidden",animate:"visible",exit:"exited",className:" side-cart-menu__item-mobile mb-2",children:[Object(h.jsx)("div",{className:"",children:Object(h.jsx)(m.b,{title:t["name_".concat(S)],className:"hover:underline",to:"/".concat(S,"/products/").concat(t.slug,"/").concat(t.id),onClick:function(){return n(!1)},children:Object(h.jsx)(f.a,{src:null===t||void 0===t?void 0:t.image,origin:"small",pb:"calc(100% * 150/150)",alt:t["name_".concat(S)]})})}),Object(h.jsxs)("div",{className:"",children:[Object(h.jsx)(m.b,{title:t["name_".concat(S)],className:"hover:underline",to:"/".concat(S,"/products/").concat(t.slug,"/").concat(t.id),onClick:function(){return n(!1)},children:Object(h.jsx)("h1",{className:"font-semibold text-clamp-2 text-sm uppercase ",children:"".concat(t["name_".concat(S)]).concat(t.options.addons?" - ".concat(Object.keys(t.options.addons).map((function(e){return t.options.addons[e]})).join(" - ")):"")})}),Object(h.jsxs)("div",{className:"flex items-center text-gray-700",children:[Object(h.jsxs)("div",{className:"flex items-center",children:[Object(h.jsx)("h1",{className:"text-xs font-semibold",children:k({id:"price"})}),Object(h.jsxs)("h1",{className:"text-xs font-bold mx-1",children:[t.total," ",null===w||void 0===w?void 0:w.currency.translation[S].symbol]})]}),Object(h.jsxs)("div",{className:"flex items-center text-xs mx-2",children:[Object(h.jsxs)("h1",{className:"font-semibold",children:[k({id:"qty"})," :"]}),Object(h.jsx)("h1",{className:"mx-1 font-bold",children:t.qty})]})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{className:"\n              bg-main-color text-main-text\n             text-xs rounded p-1 my-1 flex items-center justify-center font-semibold uppercase",onClick:F,style:{width:"140px"},children:g?Object(h.jsx)(b.a,{type:"ThreeDots",color:"#fff",height:18,width:18,visible:!0}):k({id:"remove-from-cart"})})})]})]})}},489:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return N}));var a=n(5),c=n(2),s=n.n(c),i=n(78),r=n(94),l=n(40),o=n(209),u=n(245),d=n(95),b=n(19),m=n(145),j=n(114),p=n(451),v=n(462),f=n(146),h=n(202),x=n.n(h),O=n(130),y=n(10),g=n(1);function N(){var e,t,n=Object(l.i)().query,c=Object(i.a)(),h=c.locale,N=c.formatMessage,C=s.a.useState([]),w=Object(a.a)(C,2),P=w[0],S=w[1],k=s.a.useState({value:"newest",label:"Newest"}),F=Object(a.a)(k,2),L=F[0],B=F[1],_=s.a.useState(1),E=Object(a.a)(_,2),M=E[0],I=E[1],q=s.a.useState(1),D=Object(a.a)(q,2),T=D[0],A=D[1],J=s.a.useState(!1),R=Object(a.a)(J,2),W=R[0],G=R[1],Q=s.a.useState(null),Y=Object(a.a)(Q,2),z=Y[0],H=Y[1],K=s.a.useState([]),U=Object(a.a)(K,2),V=U[0],X=U[1],Z=s.a.useState({label:20,value:20}),$=Object(a.a)(Z,2),ee=$[0],te=$[1],ne=s.a.useState(!1),ae=Object(a.a)(ne,2),ce=ae[0],se=ae[1],ie=s.a.useState(!1),re=Object(a.a)(ie,2),le=re[0],oe=re[1],ue=s.a.useState(!1),de=Object(a.a)(ue,2),be=de[0],me=de[1],je=s.a.useState(!1),pe=Object(a.a)(je,2),ve=pe[0],fe=pe[1],he=s.a.useContext(y.a),xe=he.deliveryCountry,Oe=he.sideMenuOpen;s.a.useEffect((function(){var e=function(){window.scrollY>=200?fe(!0):fe(!1)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}})),s.a.useEffect((function(){le&&setTimeout((function(){return oe(!1)}),100),be&&setTimeout((function(){return me(!1)}),100)}),[ve]);var ye=Object(r.a)(["searchProducts",{query:n,page:M,resultsPerPage:ee}],b.Q,{retry:!0,refetchOnWindowFocus:!1}),ge=ye.data,Ne=ye.isLoading,Ce=Object(r.a)(["filtered-products",{search:n,brandFilters:P,sortBy:L,page:T,resultsPerPage:ee,locale:h,priceFilters:z}],b.m,{retry:!0,refetchOnWindowFocus:!1,enabled:W}),we=Ce.data,Pe=Ce.isLoading;s.a.useEffect((function(){0===V.length?G(!1):G(!0)}),[V]);return Object(g.jsx)(d.a,{children:Object(g.jsxs)("div",{className:"min-h-screen relative",children:[Object(g.jsxs)(m.a,{children:[ce&&Object(g.jsx)(v.a,{setSideMenuOpen:se},"side-cart"),ce&&Object(g.jsx)(j.a.div,{initial:{opacity:0},animate:{opacity:.5},exit:{opacity:0},onClick:function(){return se(!1)},className:"side__addCart-bg"},"sidecart-bg")]}),!W&&(null===ge||void 0===ge?void 0:ge.products.length)>0&&!Ne||W&&(null===we||void 0===we?void 0:we.filteredProducts.length)>0&&!Pe?Object(g.jsx)("div",{className:"mb-1",children:Object(g.jsx)("div",{className:"px-3 pt-3",children:Object(g.jsxs)("h1",{className:"font-semibold text-lg",children:[(null===ge||void 0===ge?void 0:ge.products.length)>2&&(null===ge||void 0===ge?void 0:ge.products.length)," ",function(){switch(null===ge||void 0===ge?void 0:ge.products.length){case 1:return N({id:"one-search-result"});case 2:return N({id:"two-search-results"});case(null===ge||void 0===ge?void 0:ge.products.length)>10&&ge.products.length:return N({id:"more-than-10-search-results"});default:return N({id:"search-results"})}}()," ",Object(g.jsx)("strong",{children:n})]})})}):null,Object(g.jsx)(p.a,{children:Object(g.jsx)(j.a.div,{layout:!0,className:"px-3",children:0!==V.length&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(j.a.h1,{layout:!0,className:" mb-1 font-semibold",children:[N({id:"filtered-by"})," :"]}),Object(g.jsx)(j.a.div,{layout:!0,className:"flex items-center",children:V.map((function(e){return Object(g.jsxs)(j.a.button,{layout:!0,className:"mx-1 py-1 px-3 bg-main-color text-main-text rounded-full",onClick:function(){return t=e,X((function(e){return e.filter((function(e){return e.value!==t.value}))})),"Brand"===t.type&&S((function(e){return e.filter((function(e){return e.label!==t.value}))})),"Sort"===t.type&&B({value:"newest",label:"Newest"}),void("Price"===t.type&&X((function(e){return e.filter((function(e){return"Price"!==e.type}))})));var t},children:[N({id:e.type})," : ",e.value]},e.value)}))})]})})}),Object(g.jsx)("hr",{className:"my-3"}),Object(g.jsx)(o.a,{products:null===ge||void 0===ge?void 0:ge.products,productsLoading:Ne,setCartMenuOpen:se,filteredProducts:null===we||void 0===we?void 0:we.filteredProducts,filteredProductsLoading:Pe,setProductsPage:I,filtersApplied:W,handleResultPerPageChange:function(e){te(e)}}),!W&&(null===ge||void 0===ge||null===(e=ge.products)||void 0===e?void 0:e.length)>0&&!Ne||W&&(null===we||void 0===we||null===(t=we.filteredProducts)||void 0===t?void 0:t.length)>0&&!Pe?Object(g.jsx)(x.a,{previousLabel:"ar"===h?Object(g.jsx)(O.b,{className:"w-6 h-6 inline"}):Object(g.jsx)(O.a,{className:"w-6 h-6 inline"}),nextLabel:"ar"===h?Object(g.jsx)(O.a,{className:"w-6 h-6 inline"}):Object(g.jsx)(O.b,{className:"w-6 h-6 inline"}),breakLabel:"...",breakClassName:"inline",pageCount:W?null===we||void 0===we?void 0:we.lastPage:null===ge||void 0===ge?void 0:ge.lastPage,marginPagesDisplayed:2,pageRangeDisplayed:2,initialPage:W?T-1:M-1,disableInitialCallback:!0,onPageChange:W?function(e){Object(f.a)(document.getElementById("main"),document.body),A(e.selected+1)}:function(e){Object(f.a)(document.getElementById("main"),document.body),I(e.selected+1)},containerClassName:"text-center my-2",subContainerClassName:"p-3 inline",pageLinkClassName:"p-3",activeClassName:"bg-main-color font-bold text-main-text",pageClassName:" inline-block mx-2 rounded-full text-lg",previousClassName:"p-3 inline font-bold",nextClassName:"p-3 inline font-bold",disabledClassName:"text-gray-500"}):null,Object(g.jsx)(m.a,{children:ve&&!Oe&&0!==(null===ge||void 0===ge?void 0:ge.products.length)&&Object(g.jsx)(u.a,{productsLoading:Ne,products:null===ge||void 0===ge?void 0:ge.products,brandFilters:P,filtersApplied:W,setSortByOpen:oe,setFiltersOpen:me,filtersOpen:be,sortByOpen:le,sortBy:L,handleSortByChange:function(e){if("newest"===e.value)return X((function(e){return e.filter((function(e){return"Sort"!==e.type}))})),void B(e);X((function(t){var n=t.filter((function(e){return"Sort"!==e.type}));return n.push({type:"Sort",value:e.label}),n})),B(e)},priceFilters:z,handleSubmitFilters:function(e,t){S(t),H(e),Object(f.b)(window,{top:300,behavior:"smooth"}),X((function(){if(e&&!t.length>0)return[{type:"Price",value:"".concat(N({id:"less-than"})," ").concat(e," ").concat(null===xe||void 0===xe?void 0:xe.currency.translation[h].symbol)}];if(!e&&t.length>0){var n=[];return t.forEach((function(e){return n.push({type:"Brand",value:e.label})})),[].concat(n)}var a={type:"Price",value:"".concat(N({id:"less-than"})," ").concat(e," ").concat(null===xe||void 0===xe?void 0:xe.currency.translation[h].symbol)},c=[];return t.forEach((function(e){return c.push({type:"Brand",value:e.label})})),[a].concat(c)}))}})})]})})}}}]);
//# sourceMappingURL=22.af5d355a.chunk.js.map